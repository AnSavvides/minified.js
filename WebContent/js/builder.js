if(/^u/.test(typeof define)){var def={};this.define=function(n,f){def[n]=f()};this.require=function(n){return def[n]}}
define("minifiedUtil",function(){function n(d){return d.substr(0,3)}function f(d){return null!=d?""+d:""}function j(d){return"string"==typeof d}function h(d){return"function"==typeof d}function l(d){return!!d&&"object"==typeof d}function r(d){return"number"==typeof d}function q(d){return l(d)&&!!d.getDay}function e(d){return!0===d||!1===d}function p(d){var a=typeof d;return"object"==a?!(!d||!d.getDay):"string"==a||"number"==a||e(d)}function t(d){return!!d&&null!=d.length&&!j(d)&&!(d&&d.nodeType)&&
!h(d)}function k(d){return d}function v(d){return d+1}function s(d,a,b){return f(d).replace(a,null!=b?b:"")}function Q(d){return s(d,/[\\\[\]\/{}()*+?.$|^-]/g,"\\$&")}function E(d){return s(d,/^\s+|\s+$/g)}function z(d,a){for(var b in d)d.hasOwnProperty(b)&&a(b,d[b]);return d}function B(d,a){if(d)for(var b=0;b<d.length;b++)a(d[b],b);return d}function F(d,a){var b=[];B(d,function(d,c){a(d,c)&&b.push(d)});return b}function R(d,a,b){var c=[];d(a,function(d,a){t(d=b(d,a))?B(d,function(d){c.push(d)}):
null!=d&&c.push(d)});return c}function A(d,a){return R(B,d,a)}function G(d){var a=[];z(d,function(d){a.push(d)});return a}function w(d,a){var b=[];B(d,function(d,c){b.push(a(d,c))});return b}function y(d,a){if(t(d)){var b=N(a);return u(N(d).sub(0,b.length),b)}return null!=a&&d.substr(0,a.length)==a}function C(d,a){if(t(d)){var b=N(a);return N(d).sub(-b.length).equals(b)||!b.length}return null!=a&&d.substr(d.length-a.length)==a}function K(d){var a=d.length;return w(d,function(){return d[--a]})}function L(d,
a,b){if(!d)return[];var c=d.length,g=0>a?c+a:a,m=null==b?c:0<=b?b:c+b;return F(d,function(d,a){return a>=g&&a<m})}function S(d,a){var b={};B(d,function(d){b[d]=a});return b}function H(d,a,b){z(d,function(d,c){if(null==a[d]||!b)a[d]=c});return a}function I(d,a){for(var b=h(a)?a:function(d,b){if(a===d)return b},c,g=0;g<d.length;g++)if(null!=(c=b(d[g],g)))return c}function a(d){return w(d,k)}function b(){var d=this;return function(){return new P(x(d,arguments))}}function c(d){var a={};return F(d,function(d){if(a[d])return!1;
a[d]=1;return!0})}function g(d,a){var b=S(a,1);return F(d,function(d){var a=b[d];b[d]=0;return a})}function m(d,a){for(var b=0;b<d.length;b++)if(d[b]==a)return!0;return!1}function u(d,a){var b=h(d)?d():d,c=h(a)?a():a;if(b==c)return!0;if(null==b||null==c)return!1;if(p(b)||p(c))return q(b)&&q(c)&&b.getTime()==c.getTime();if(t(b))return b.length!=c.length?!1:!I(b,function(d,a){if(!u(d,c[a]))return!0});if(t(c))return!1;var g=G(b),m=g.length,f=0;z(c,function(){f++});return m!=f?!1:!I(g,function(d){if(!u(b[d],
c[d]))return!0})}function O(d,a,b){return d.apply(b&&a,w(b||a,k))}function x(d,a,b){return w(d,function(d){return h(d)?O(d,a,b):U})}function da(d,a,b,c){return function(){return O(d,a,A([b,arguments,c],k))}}function V(d,a){return Y(a,0,0,0,d)}function Y(d,a,b,c,g,m,f){function p(d){var a=d.length;return a>f?p(d.substr(0,a-f))+(m||",")+d.substr(a-f):d}var u=0>d,e=/(\d+)(\.(.*))?/.exec((u?-d:d).toFixed(a));d=e[1];for(c=(c||".")+e[3];d.length<(g||1);)d="0"+d;f&&(d=p(d));return(u?"-":"")+d+(a?b?s(c,/[.,]?0+$/):
c:"")}function T(d,a,b){return null==a||!d?0:60*parseInt(d[a])+parseInt(d[a+1])+b.getTimezoneOffset()}function W(d,a){if(1==arguments.length)return W(null,d);if(/^\?/.test(d)){if(""==E(a))return null;d=d.substr(1)}var b,c=(b=/[0#]([.,])[_9]/.exec(d))?b[1]:(b=/^[.,]$/.exec(d))?b[0]:".";b=parseFloat(s(s(s(a,","==c?/\./g:/,/g),c,"."),/^[^\d-]*(-?\d)/,"$1"));return isNaN(b)?U:b}function ea(d){return new Date(d.getTime())}function Z(d,a,b){d["set"+a].call(d,d["get"+a].call(d)+b);return d}function X(d,
a,b){return 3>arguments.length?X(new Date,d,a):Z(ea(d),a.charAt(0).toUpperCase()+a.substr(1),b)}function fa(d,a,b){var c=a.getTime(),g=b.getTime(),m=g-c;if(0>m)return-fa(d,b,a);if(a={milliseconds:1,seconds:1E3,minutes:6E4,hours:36E5}[d])return m/a;a=d.charAt(0).toUpperCase()+d.substr(1);d=Math.floor(m/{fullYear:31536E6,month:2628E6,date:864E5}[d]-2);c=Z(new Date(c),a,d);for(m=d;m<1.2*d+4;m++)if(Z(c,a,1).getTime()>g)return m}function ga(a){return s(a,/['"\t\n\r]/g,function(a){return la[a]})}function aa(a,
b){if(ba[a])return ba[a];var c="with(_.isObject(obj)?obj:{}){"+w(a.split(/{{|}}}?/),function(a,d){var b,c=E(a),g=s(c,/^{/),c=c==g?"esc(":"";if(d%2)return(b=/^each\b(\s+([\w_]+(\s*,\s*[\w_]+)?)\s*:)?(.*)/.exec(g))?"each("+(""==E(b[4])?"this":b[4])+", function("+b[2]+"){":(b=/^if\b(.*)/.exec(g))?"if("+b[1]+"){":(b=/^else\b\s*(if\b(.*))?/.exec(g))?"}else "+(b[1]?"if("+b[2]+")":"")+"{":(b=/^\/(if)?/.exec(g))?b[1]?"}\n":"});\n":(b=/^#(.*)/.exec(g))?b[1]:(b=/(.*)::\s*(.*)/.exec(g))?"print("+c+'_.formatValue("'+
ga(b[2])+'",'+(""==E(b[1])?"this":b[1])+(c&&")")+"));\n":"print("+c+(""==E(g)?"this":g)+(c&&")")+");\n";if(""!=a)return'print("'+ga(a)+'");\n'}).join("")+"}",g=new Function("obj","each","esc","print","_",c);return ba[a]=function(a,d){var c=[];g.call(d||a,a,function(a,d){t(a)?B(a,function(a,b){d.call(a,a,b)}):z(a,function(a,b){d.call(b,a,b)})},b||k,function(){O(c.push,c,arguments)},N);return c.join("")}}function ha(a){return s(a,/[<>'"&]/g,function(a){return"&#"+a.charCodeAt(0)+";"})}function P(a,
b){for(var c=0,g=0;g<a.length;g++){var m=a[g];if(b&&t(m))for(var f=0;f<m.length;f++)this[c++]=m[f];else this[c++]=m}this.length=c;this._=!0}function N(){return new P(arguments,!0)}function M(a){return function(b,c){return new P(a(this,b,c))}}function J(a){return function(b,c){return a(this,b,c)}}function D(a){return function(b,c,g){return new P(a(b,c,g))}}var U,ca="January,February,March,April,May,June,July,August,September,October,November,December".split(/,/),ia=w(ca,n),ja="Sunday,Monday,Tuesday,Wednesday,Thursday,Friday,Saturday".split(/,/),
ma=w(ja,n),ka=["am","pm"],la={'"':'\\"',"'":"\\'","\n":"\\n","\t":"\\t","\r":"\\r"},ba={};H({each:J(B),filter:M(F),collect:M(A),map:M(w),toObject:J(S),equals:J(u),sub:M(L),reverse:M(K),find:J(I),startsWith:J(y),endsWith:J(C),contains:J(m),call:M(x),array:J(a),unite:J(b),uniq:M(c),intersection:M(g),join:function(a){return w(this,k).join(a)},sort:function(a){return new P(w(this,k).sort(a))},tap:function(a){a(this);return this}},P.prototype);H({filter:D(F),collect:D(A),collectObj:D(function(a,b){return R(z,
a,b)}),map:D(w),sub:D(L),reverse:D(K),each:B,toObject:S,find:I,contains:m,startsWith:y,endsWith:C,equals:u,keys:D(G),values:D(function(a,b){var c=[];b?B(b,function(b){c.push(a[b])}):z(a,function(a,b){c.push(b)});return c}),call:D(x),array:a,unite:b,uniq:D(c),intersection:D(g),bind:da,partial:function(a,b,c){return da(a,null,b,c)},once:function(a){var b=0;return function(){if(!b++)return O(a,this,arguments)}},nonOp:k,eachObj:z,mapObj:function(a,b){var c={};z(a,function(a,d){c[a]=b(a,d)});return c},
filterObj:function(a,b){var c={};z(a,function(a,d){b(a,d)&&(c[a]=d)});return c},isList:t,isFunction:h,isObject:l,isNumber:r,isBool:e,isDate:q,isValue:p,isString:j,toString:f,toList:function(a){return t(a)?a:null!=a?[a]:[]},dateClone:ea,dateAdd:X,dateDiff:fa,dateMidnight:function(a){a=a||new Date;return new Date(a.getFullYear(),a.getMonth(),a.getDate())},formatNumber:Y,pad:V,formatValue:function(a,b){a=s(a,/^\?/);if(q(b)){var c,g,m=a,p=b,u={y:["FullYear",k],M:["Month",v],n:["Month",ia],N:["Month",
ca],d:["Date",k],m:["Minutes",k],H:["Hours",k],h:["Hours",function(a){return a%12||12}],K:["Hours",v],k:["Hours",function(a){return a%12+1}],s:["Seconds",k],S:["Milliseconds",k],a:["Hours",function(a,b){return(b||ka)[12>a?0:1]}],w:["Day",ma],W:["Day",ja],z:["TimezoneOffset",function(a){if(c)return c;var b=0<a?a:-a;return(0>a?"+":"-")+V(2,Math.floor(b/60))+V(2,b%60)}]};if(g=/^\[(([+-]\d\d)(\d\d))\]\s*(.*)/.exec(a))c=g[1],p=X(b,"minutes",T(g,2,b)),m=g[4];return s(m,/(\w)(\1*)(?:\[([^\]]+)\])?/g,function(a,
b,d,c){if(b=u[b])a=p["get"+(t(b)?b[0]:b)].call(p),c=c&&c.split(","),a=t(b[1])?(c||b[1])[a]:b[1](a,c),null!=a&&!j(a)&&(a=V(d.length+1,a));return a})}return I(a.split(/\s*\|\s*/),function(a){var c,d;if(c=/^([<>]?)(=?)([^:]*?)\s*:\s*(.*)$/.exec(a)){a=b;var g=parseFloat(c[3]);if(isNaN(g)||!r(a))a=null==a?"null":f(a),g=c[3];if(c[1]){if(!c[2]&&a==g||"<"==c[1]&&a>g||">"==c[1]&&a<g)return null}else if(a!=g)return null;a=c[4]}if(r(b)&&(c=/(?:(0[0.,]*)|(#[#.,]*))(_*)(9*)/.exec(a))){d=f(c[1])+f(c[2]);var g=
f(c[1]).length?s(d,/[.,]/g).length:1,m=s(s(d,/^.*[0#]/),/[^,.]/g),p=f(c[3]).length+f(c[4]).length,u,e;if(d=/([.,])[^.,]+[.,]/.exec(c[0]))u=d[1],e=d[0].length-2;u=Y(b,p,f(c[3]).length,m,g,u,e);e=a;a=c.index;c=f(c[0]).length;return e.substr(0,a)+u+e.substr(a+c)}return a})},parseDate:function(a,b){var c={y:0,M:[1,1],n:[1,ia],N:[1,ca],d:2,m:4,H:3,h:3,K:[3,1],k:[3,1],s:5,S:6,a:[3,ka]},g={},m=1,f,p,u;if(/^\?/.test(a)){if(""==E(b))return null;a=a.substr(1)}if(u=/^\[([+-]\d\d)(\d\d)\]\s*(.*)/.exec(a))f=u,
a=u[3];if(!(u=RegExp(a.replace(/(.)(\1*)(?:\[([^\]]*)\])?/g,function(a,b,c,d){return/[dmhkyhs]/i.test(b)?(g[m++]=b,a=c.length+1,"(\\d"+(2>a?"+":"{1,"+a+"}")+")"):"z"==b?(p=m,m+=2,"([+-]\\d\\d)(\\d\\d)"):/[Nna]/.test(b)?(g[m++]=[b,d&&d.split(",")],"([a-zA-Z\u0080\ufffd\u1fff]+)"):/w/i.test(b)?"[a-zA-Z\u0080\ufffd\u1fff]+":/\s/.test(b)?"\\s+":Q(a)})).exec(b)))return U;for(var e=[0,0,0,0,0,0,0],l=1;l<m;l++){var n=u[l],h=g[l];if(t(h)){var k=h[0],x=c[k],j=x[0],h=I(h[1]||x[1],function(a,b){return y(n.toLowerCase(),
a.toLowerCase())?b:null});if(null==h)return U;e[j]="a"==k?e[j]+12*h:h}else h&&(k=parseInt(n),x=c[h],t(x)?e[x[0]]+=k-x[1]:e[x]+=k)}c=new Date(e[0],e[1],e[2],e[3],e[4],e[5],e[6]);return X(c,"minutes",-T(f,1,c)-T(u,p,c))},parseNumber:W,copyObj:H,coal:function(){return I(arguments,k)},trim:E,escapeRegExp:Q,escapeHtml:ha,format:function(a,b){return aa(a)(b)},template:aa,htmlTemlplate:function(a){return aa(a,ha)}},N);return{_:N}});/^u/.test(typeof define)&&(def={},this.define=function(n,f){def[n]=f()},this.require=function(n){return def[n]});
define("minified",function(){function n(a){return null!=a?""+a:""}function f(a){return"string"==typeof a}function j(a){return"function"==typeof a&&!a.item}function h(a){return a&&a.nodeType}function l(a){return a&&null!=a.length&&!f(a)&&!h(a)&&!j(a)}function r(a,b){for(var c in a)a.hasOwnProperty(c)&&b(c,a[c]);return a}function q(a,b){for(var c=0;a&&c<a.length;c++)b(a[c],c);return a}function e(a,b){var c=[];q(a,function(a,m){b(a,m)&&c.push(a)});return c}function p(a,b){var c=[];q(a,function(a,m){l(a=
b(a,m))?q(a,function(a){c.push(a)}):null!=a&&c.push(a)});return c}function t(a,b){var c=[];r(a,function(a,m){l(a=b(a,m))?q(a,function(a){c.push(a)}):null!=a&&c.push(a)});return c}function k(a,b,c){return n(a).replace(b,c||"")}function v(a){return parseFloat(k(a,/^[^\d-]+/))}function s(a){var b={$position:"absolute",$visibility:"hidden",$display:"block",$height:null},c=a.get(b);a.set(b);b=a.get("$height",!0);a.set(c);return b}function Q(a){a()}function E(){q(K,Q);K=null}function z(a){K?K.push(a):y.setTimeout(a,
0)}function B(a,b,c,g){return function(){var m=A(C.createElement(a));l(b)||"object"!=typeof b?m.add(b):m.set(b).add(c);g&&g(m);return m}}function F(){var a,b=[],c=[],g=function(g,m){null==a&&(a=g,b=m,y.setTimeout(function(){q(c,Q)},0))},m=g.then=function(g,m){var e=F(),f=function(){try{var c=a?g:m;if(j(c)){var f=c.apply(null,b);f&&j(f.then)?f.then(function(a){e(!0,[a])},function(a){e(!1,[a])}):e(!0,[f])}else e(a,b)}catch(p){e(!1,[p])}};null!=a?y.setTimeout(f,0):c.push(f);return e};g.always=function(a){return m(a,
a)};g.error=function(a){return m(0,a)};return g}function R(a){return I[a]||"\\u"+("0000"+a.charCodeAt(0).toString(16)).slice(-4)}function A(a,b,c){return j(a)?z(a):new w(G(a,b,c))}function G(a,b,c){function g(a){a=function T(a){return l(a)?p(a,T):a}(a);return m?e(a,function(a){for(;a=a.parentNode;){if(a===m)return!0;if(c)return!1}}):a}var m,h,n,x,j;if(b&&1!=(b=G(b)).length)return p(b,function(b){return G(a,b,c)});m=b&&b[0];if(!f(a))return g(l(a)?a:[a]);if(1<(b=a.split(/\s*,\s*/)).length)return p(b,
function(a){return G(a,m,c)});if(b=/(\S+)\s+(.+)$/.exec(a))return G(b[2],G(b[1],m),c);if(a!=(b=k(a,/^#/)))return g([C.getElementById(b)]);m=m||C;h=(b=/([^.]*)\.?([^.]*)/.exec(a))[1];x=b[2];b=(n=m.getElementsByClassName&&x)?m.getElementsByClassName(x):m.getElementsByTagName(h||"*");if(h=n?h:x)j=RegExp("\\b"+h+"\\b","i"),b=e(b,function(a){return j.test(a[n?"nodeName":"className"])});return m?g(b):b}function w(a){for(var b=this.length=a.length,c=0;c<b;c++)this[c]=a[c]}var y=this,C=document,K=[],L=[],
S=y.requestAnimationFrame||function(a){y.setTimeout(a,33)},H=!!C.all&&!K.map,I={"\t":"\\t","\r":"\\r","\n":"\\n",'"':'\\"',"\\":"\\\\"};r({each:function(a){return q(this,a)},filter:function(a){return new w(e(this,a))},collect:function(a){return new w(p(this,a))},sub:function(a,b){var c=0>a?this.length+a:a,g=0<=b?b:this.length+(b||0);return new w(e(this,function(a,b){return b>=c&&b<g}))},find:function(a){for(var b,c=j(a)?a:function(b,c){if(a===b)return c},g=0;g<this.length;g++)if(null!=(b=c(this[g],
g)))return b},hasClass:function(a){var b=RegExp("\\b"+a+"\\b");return this.find(function(a){return b.test(a.className)?a:null})},remove:function(){q(this,function(a){a.parentNode.removeChild(a)})},text:function(){function a(b){var c=h(b);return 1==c?p(b.childNodes,a):5>c?b.data:null}return p(this,a).join("")},get:function(a,b){var c=this,g=c[0];if(g){if(f(a)){var m=k(a,/^[$@]/),e;e="$"==a?g.className:"$$"==a?H?g.style.cssText:g.getAttribute("style"):/\$\$/.test(a)&&("hidden"==g.style.visibility||
"none"==g.style.display)?0:"$$fade"==a?isNaN(e=H?v(g.style.filter)/100:v(g.style.opacity))?1:e:"$$slide"==a?c.get("$height"):/^\$/.test(a)?y.getComputedStyle?y.getComputedStyle(g,null).getPropertyValue(k(m,/[A-Z]/g,function(a){return"-"+a.toLowerCase()})):(g.currentStyle||g.style)[m]:/^@/.test(a)?g.getAttribute(m):g[m];return b?v(e):e}var p={};(l(a)?q:r)(a,function(a){p[a]=c.get(a,b)});return p}},set:function(a,b){var c=this,g;void 0!==b?"$$fade"==a||"$$slide"==a?c.set({$visibility:0<(g=v(b))?"visible":
"hidden",$display:"block"}).set("$$fade"==a?H?{$filter:"alpha(opacity = "+100*g+")",$zoom:1}:{$opacity:g}:{$height:/px$/.test(b)?b:function(a,b,c){return g*(g&&s(A(c)))+"px"},$overflow:"hidden"}):q(c,function(c,g){var e=k(a,/^[@$]/),f=c.className||"",p=/^\$/.test(a)?c.style:c,h=j(b)?b(A(c).get(a),g,c):b;"$"==a?null!=h&&(q(h.split(/\s+/),function(a){var b=k(a,/^[+-]/),c=f;f=k(f,RegExp("\\b"+b+"\\b"));if(/^\+/.test(a)||b==a&&c==f)f+=" "+b}),c.className=k(f,/^\s+|\s+(?=\s|$)/g)):"$$"==a?H?p.cssText=
h:null!=h?c.setAttribute("style",h):c.removeAttribute("style"):/^@/.test(a)?null!=h?p.setAttribute(e,h):p.removeAttribute(e):p[e]=h}):f(a)||j(a)?c.set("$",a):r(a,function(a,b){c.set(a,b)});return c},add:function(a,b){return q(this,function(c,g){var e;(function O(a){l(a)?q(a,O):j(a)?O(a(c,g)):null!=a&&(a=h(a)?a:C.createTextNode(a),e?e.parentNode.insertBefore(a,e.nextSibling):b?b(a,c,c.parentNode):c.appendChild(a),e=a)})(h(a)&&g?null:a)})},fill:function(a){return q(this,function(a){A(a.childNodes).remove()}).add(a)},
addBefore:function(a){return this.add(a,function(a,c,g){g.insertBefore(a,c)})},addAfter:function(a){return this.add(a,function(a,c,g){g.insertBefore(a,c.nextSibling)})},addFront:function(a){return this.add(a,function(a,c){c.insertBefore(a,c.firstChild)})},replace:function(a){return this.add(a,function(a,c,g){g.replaceChild(a,c)})},clone:function(a){return new w(p(this,function(b){var c=h(b);if(1==c){var g={$:b.className||null,$$:H?b.style.cssText:b.getAttribute("style")};q(b.attributes,function(a){var c=
a.name;"id"!=c&&("style"!=c&&"class"!=c&&b.getAttribute(c))&&(g["@"+c]=a.value)});return B(b.tagName,g,A(b.childNodes).clone(),a)}return 5>c?b.data:null}))},animate:function(a,b,c,g){var e=this,f=[],p=/-?[\d.]+/,h,l=F(),t=j(c)?c:function(a,b,g){return a+g*(b-a)*(c+(1-c)*g*(3-2*g))};g=g||{};g.time=0;g.stop=function(){h();l(!1)};b=b||500;c=c||0;q(e,function(b){var c={o:A(b),e:{}};r(c.s=c.o.get(a),function(b,g){var e=a[b];"$$slide"==b&&(e=e*s(c.o)+"px");c.e[b]=/^[+-]=/.test(e)?k(e.substr(2),p,v(g)+v(k(e,
/\+?=/))):e});f.push(c)});h=A.loop(function(a){function c(a,b){return/^#/.test(a)?parseInt(6<a.length?a.substr(1+2*b,2):(a=a.charAt(1+b))+a,16):parseInt(k(a,/[^\d,]+/g).split(",")[b])}g.time=a;a>=b||0>a?(q(f,function(a){a.o.set(a.e)}),h(),g.time=null,l(!0,[e])):q(f,function(g){r(g.s,function(e,f){var h="rgb(",m=g.e[e],l=a/b;if(/^#|rgb\(/.test(m))for(var j=0;3>j;j++)h+=Math.round(t(c(f,j),c(m,j),l))+(2>j?",":")");else h=k(m,p,n(t(v(f),v(m),l)));g.o.set(e,h)})})});return l},toggle:function(a,b,c,g){var e=
this,f={},h=!1,p=/\b(?=\w)/g;return!b?e.toggle(k(a,p,"-"),k(a,p,"+")):e.set(a)&&function(p){p!==h&&(h=!0===p||!1===p?p:!h,c?e.animate(h?b:a,f.stop?f.stop()||f.time:c,g,f):e.set(h?b:a))}},on:function(a,b,c,g){return q(this,function(e,f){q(a.split(/\s/),function(a){var h=k(a,/\|/),p=function(e){e=e||y.event;if((!b.apply(g?c:e.target,g||c||[e,f])||g)&&a==h)e.stopPropagation&&(e.preventDefault(),e.stopPropagation()),e.returnValue=!1,e.cancelBubble=!0};(b.M=b.M||[]).push({e:e,h:p,n:h});e.addEventListener?
e.addEventListener(h,p,!0):e.attachEvent("on"+h,p)})})}},function(a,b){w.prototype[a]=b});r({request:function(a,b,c,g,e,j){var k,q=c,v=0,s=F();try{k=y.XMLHttpRequest?new XMLHttpRequest:new ActiveXObject("Msxml2.XMLHTTP.3.0"),null!=c&&(g=g||{},!f(c)&&!h(c)&&(q=t(c,function W(a,b){return l(b)?p(b,function(b){return W(a,b)}):encodeURIComponent(a)+(null!=b?"="+encodeURIComponent(b):"")}).join("&")),/post/i.test(a)?!h(c)&&(!f(c)&&!g["Content-Type"])&&(g["Content-Type"]="application/x-www-form-urlencoded"):
(b+="?"+q,q=null)),k.open(a,b,!0,e,j),r(g,function(a,b){k.setRequestHeader(a,b)}),k.onreadystatechange=function(){4==k.readyState&&!v++&&(200==k.status?s(!0,[k.responseText,k.responseXML]):s(!1,[k.status,k.statusText,k.responseText]))},k.send(q)}catch(z){v||s(!1,[0,null,n(z)])}return s},toJSON:function b(c){return null==c?""+c:f(c=c.valueOf())?'"'+k(c,/[\\\"\x00-\x1f\x22\x5c]/g,R)+'"':l(c)?"["+p(c,b).join()+"]":"object"==typeof c?"{"+t(c,function(c,e){return b(c)+":"+b(e)}).join()+"}":n(c)},parseJSON:y.JSON?
y.JSON.parse:function(b){b=k(b,/[\x00\xad\u0600-\uffff]/g,R);if(/^[[\],:{}\s]*$/.test(k(k(b,/\\["\\\/bfnrtu]/g),/"[^"\\\n\r]*"|true|false|null|[\d.eE+-]+/g)))return eval("("+b+")")},ready:z,setCookie:function(b,c,g,e,f,h){C.cookie=b+"="+(h?c:escape(c))+(g?"; expires="+("object"==typeof g?g:new Date((new Date).getTime()+864E5*g)).toUTCString():"")+"; path="+(e?escapeURI(e):"/")+(f?"; domain="+escape(f):"")},getCookie:function(b,c){var g,e=(g=RegExp("(^|;)\\s*"+b+"=([^;]*)").exec(C.cookie))&&g[2];return c?
e:e&&unescape(e)},loop:function(b){var c={c:b,t:(new Date).getTime(),s:function(){for(var b=0;b<L.length;b++)L[b]===c&&L.splice(b--,1)}};2>L.push(c)&&function m(){q(L,function(b){b.c(Math.max(0,(new Date).getTime()-b.t),b.s)}).length&&S(m)}();return c.s},wait:function(b,c){var e=F();y.setTimeout(function(){e(!0,c)},b||0);return e},off:function(b){q(b.M,function(b){b.e.removeEventListener?b.e.removeEventListener(b.n,b.h,!0):b.e.detachEvent("on"+b.n,b.h)});b.M=null}},function(b,c){A[b]=c});y.onload=
E;C.addEventListener&&C.addEventListener("DOMContentLoaded",E,!1);return{$:A,$$:function(b){return G(b)[0]},EE:B}});var _=require("minifiedUtil")._;
function parseSourceSections(n){function f(){return{id:"anon"+j++,src:[],desc:"",requires:{},requiredBy:{},syntax:[],example:[],params:[]}}n=n.split("\n");var j=100,h=[],l=f(),r=!1;_.each(n,function(j){if(r&&/^.*\*\/\s*$/.test(j))r=!1;else if(r){var e=j.replace(/^\s*(\*\s?)?/,"").replace(/\s*$/,""),p=e.match(/^\s*@([a-z]+)/);p?(p=p[1],e=_.trim(e.replace(/^\s*@[a-z]+\s*/,"")),"syntax"==p||"example"==p?l[p].push(e):"requires"==p?e.length&&_.each(e.split(/\s+/),function(e){l.requires[e]=1}):"param"==
p?l.params.push({name:e.replace(/\s.*$/,""),desc:e.replace(/^\S+\s+/,"")}):"return"==p?l.params.push({name:"@return",desc:e}):"function"==p?l.params[l.params.length-1].funcs.push(e):l[p]=""!=e?e:1):l.params.length?l.params[l.params.length-1].desc+="\n"+_.trim(e):l.example.length?l.example[l.example.length-1]+="\n"+e:l.desc+=e+"\n"}else/^\s*\/\*\$/.test(j)&&!/\*\/\s*$/.test(j)&&(r=!0,h.push(l),l=f());l.src.push(j)});h.push(l);return h}
function createSectionMap(n){var f={};_.each(n,function(j){f[j.id]=j});return f}function completeRequirements(n,f){var j=0;_.each(n,function(h){_.eachObj(h.requires,function(l){var n=f[l];if(!n)throw Error('Unknown id in requirement: "'+l+'"');_.eachObj(n.requires,function(f){h.requires[f]||(j++,h.requires[f]=1)})})});0<j?completeRequirements(n,f):_.each(n,function(h){_.eachObj(h.requires,function(j){f[j].requiredBy[h.id]=1})})}
function calculateDependencies(n,f){var j={};_.eachObj(f,function(h){f[h]&&(j[h]=1,_.eachObj(n[h].requires,function(f){j[f]=1}))});return j}function createDefaultConfigurationMap(n,f){var j={};_.each(n,function(h){if(h.configurable&&("default"==h.configurable||f))j[h.id]=1});return j}
function compile(n,f,j){var h="",l=calculateDependencies(f,j),r=[],q=!0;_.filter(n,function(e){return l[e.id]||!(e.configurable||e.dependency)}).each(function(e){_.each(e.src,function(e){if(/^\s*$/.test(e))q||(h+="\n"),q=!0;else{var f=e.match(/^(\s*)\/\/\s*@(cond|condblock)\s+(\!?)(\w*)\s*(.*)$/);if(f&&"cond"==f[2]&&!!l[f[4]]!=("!"==f[3]))h+=f[1]+f[5]+"\n";else{var k=!1,j=!0;f&&"condblock"==f[2]?r.push(!!l[f[4]]!=("!"==f[3])):/^\s*\/\/\s*@condend\b/.test(e)&&(k=!0);for(f=0;f<r.length;f++)if(!r[f]){j=
!1;break}j&&(h+=e+"\n");k&&r.pop()}q=!1}})});return h}function prepareSections(n){n=parseSourceSections(n);var f=createSectionMap(n);completeRequirements(n,f);var j=createDefaultConfigurationMap(n);return{sections:n,sectionMap:f,enabledSections:j}}var CONFIG_START="minified.js config start --",CONFIG_COMMENT="// - ",CONFIG_ALL="All sections.",CONFIG_ALL_EXCEPT="All sections except ",CONFIG_ONLY="Only sections ";
function serializeEnabledSections(n,f){var j=_.filter(n,function(e){return e.configurable}),h=_.filter(_.keys(f),function(e){return f[e]}),l,r=[];h.length==j.length?(l=CONFIG_COMMENT+CONFIG_ALL,r=[]):h.length/3>j.length/2?(l=CONFIG_COMMENT+CONFIG_ALL_EXCEPT,r=_.filter(j,function(e){return!f[e.id]}).collect(function(e){return e.id})):(l=CONFIG_COMMENT+CONFIG_ONLY,r=h);var q="// "+CONFIG_START+" use this comment to re-create configuration in the Builder\n"+l,e=50;_(r).sort().each(function(f){e<f.length?
(e=70,q+="\n// - "+f+", "):(q+=f+", ",e-=f.length+2)});return q=q.replace(/,\s*$/,".\n")}function fixConfig(n,f){_.eachObj(f,function(j){n[j]?_.copyObj(n[j].requires,f):delete f[j]});return f}
function deserializeEnabledSections(n,f,j){function h(e){return RegExp("^"+e.replace(/ /g,"\\s+"))}var l=h(CONFIG_START+".*"),r=h(CONFIG_ALL.replace(/\./,"\\.")),q=h(CONFIG_ALL_EXCEPT+"\\s*"),e=h(CONFIG_ONLY+"\\s*"),p=h(CONFIG_COMMENT);j=j.split("\n");for(var t=0;t<j.length;t++){var k=j[t];if(/^\s*\/\/s*/.test(k)&&(k=k.replace(/^\s*\/\/\s*/,""),l.test(k)&&t+1<j.length)){for(var k="",v=t+1;v<j.length;v++)if(p.test(j[v])){if(k+=j[v].replace(p,""),/\s*\.\s*$/.test(j[v]))break}else break;if(r.test(k))return createDefaultConfigurationMap(n,
!0);k=k.replace(/\s*\.\s*$/,"");if(q.test(k)){var s=createDefaultConfigurationMap(n,!0);_.each(k.replace(q,"").split(/\s*,\s*/),function(e){delete s[e]});return fixConfig(f,s)}if(e.test(k))return s={},_.each(k.replace(e,"").split(/\s*,\s*/),function(e){f[e]&&(s[e]=1)}),fixConfig(f,s)}}return null};var MINI=require("minified"),$=MINI.$,$$=MINI.$$,EE=MINI.EE,_=require("minifiedUtil")._,MAX_SIZE=4095,SRC="/download/minified-web-src.js",GROUPS="INTERNAL SELECTORS ELEMENT REQUEST JSON EVENTS COOKIE ANIMATION OPTIONS".split(" ");
function closureCompile(n,f,j){$.request("post","http://closure-compiler.appspot.com/compile",{js_code:n,output_format:"json",output_info:["compiled_code","statistics"],output_file_name:"minified-custom.js",compilation_level:f?"ADVANCED_OPTIMIZATIONS":"SIMPLE_OPTIMIZATIONS"}).then(function(f){j&&j($.parseJSON(f))},function(f,n,r){window.console&&console.log("error",f,n,r);j&&j(null)}).error(function(f){window.console&&console.log(f)})}
function setUpConfigurationUI(n){function f(){$(".modCheck").each(function(e){var f=0;$(".secCheck",e.parentNode.parentNode).each(function(e){e.checked&&f++});e.checked=0<f})}function j(e){var f=n.sectionMap[e.id.substr(4)];e.checked?_.eachObj(f.requires,function(e){$("#sec-"+e).set("checked",!0)}):_.eachObj(f.requiredBy,function(e){$("#sec-"+e).set("checked",!1)})}$("#compile").on("click",function(){var e={};$(".secCheck").each(function(f){f.checked&&(e[f.id.substr(4)]=1)});var f=compile(n.sections,
n.sectionMap,e),h=serializeEnabledSections(n.sections,e);if($$("#compressionAdvanced").checked)$$("#compile").disabled=!0,closureCompile(f,!0,function(e){$$("#compile").disabled=!1;$("#resultDiv").animate({$$slide:1});e?($("#gzipRow, #downloadRow").set({$display:"table-row"}),$$("#resultSrc").value=h+"\n"+e.compiledCode,$("#resultPlain").fill((e.statistics.compressedSize/1024).toFixed(2)+"kb ("+e.statistics.compressedSize+" bytes)"),$("#resultGzippedSize").fill((e.statistics.compressedGzipSize/1024).toFixed(2)+
"kb ("+e.statistics.compressedGzipSize+" bytes)"),$$("#resultLink").setAttribute("href","http://closure-compiler.appspot.com"+e.outputFilePath),$("#resultGzippedComment").set({$$fade:e.statistics.compressedGzipSize>MAX_SIZE?1:0})):alert("Google Closure Service not availble. Try again later.")});else try{$("#resultDiv").animate({$$slide:1}),$$("#resultSrc").value=h+f,$("#resultPlain").fill((f.length/1024).toFixed(2)+"kb"),$("#gzipRow, #downloadRow").set({$display:"none"})}catch(j){console.log(j)}return!1});
var h=$("#configSrcDiv").toggle({$$slide:0},{$$slide:1});$("#fromScratch").on("|click",h,[!1]);$("#loadConfig").on("|click",h,[!0]);$("#recreate").on("click",function(){try{var e=$$("#configSrc").value,h=deserializeEnabledSections(n.sections,n.sectionMap,e);h?(_.eachObj(n.sectionMap,function(e){var f=$$("#sec-"+e);f&&(f.checked=!!h[e])}),f()):alert("Can not find configuration in source.")}catch(j){console.log(j)}});$("#sectionCheckboxes").fill();for(var l=1;l<GROUPS.length;l++){var r;$("#sectionCheckboxes").add(r=
EE("div",{"@id":"divMod-"+l},EE("div",{className:"groupDescriptor"},[h=EE("input",{"@id":"mod-"+l,className:"modCheck","@type":"checkbox",checked:"checked"})(),EE("label",{"@for":"mod-"+l},GROUPS[l])]))());$(h).on("change",function(){var e=this.checked;$(".secCheck",this.parentNode.parentNode).each(function(f){f.checked=e;j(f)});f();return!0});var q;_.filter(n.sections,function(e){return e.group==GROUPS[l]&&e.configurable}).sort(function(e,f){var h=e.name||e.id,j=f.name||f.id;return h==j?0:h>j?1:
-1}).each(function(e){function h(e,f){var j=_.filter(_.keys(f),function(e){return!!f[e].name});if(!j.length)return null;var l=0,k=e;_.each(j,function(e){l++<Math.min(j.length,8)&&(1<l&&(k=l==Math.min(j.length,8)?k+" and ":k+", "),k=8==l&&8<j.length?k+"more":k+(n.sectionMap[e].name||n.sectionMap[e].id))});return k+="."}var l=h("Required by ",e.requiredBy),k=h("Requires ",e.requires);r.add(EE("div",{className:"sectionDescriptor"},[q=EE("input",{className:"secCheck","@type":"checkbox","@id":"sec-"+e.id,
checked:"default"==e.configurable?"checked":null})(),EE("label",{"@for":"sec-"+e.id},e.name||e.id),EE("div",{className:"requirements"},[l?[l,EE("br")]:null,k])]));$(q).on("change",function(){j(this);f();return!0})})}}
$(function(){var n=/MSIE\s([\d.]+)/i.exec(navigator.userAgent);n&&10>parseInt(n[1])?$("#builderDiv").fill("Sorry, the Builder tool requires at least Internet Explorer 10 (or, alternatively, Chrome or Firefox). Earlier versions lack CORS support required to use Google Closure's web service."):$.request("get",SRC,null).then(function(f){setUpConfigurationUI(prepareSections(f))}).error(function(f){window.console&&console.log(f)})});
