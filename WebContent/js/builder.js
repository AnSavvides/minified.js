if(/^u/.test(typeof define)){var def={};this.define=function(m,f){def[m]=f()};this.require=function(m){return def[m]}}
define("minifiedUtil",function(){function m(d){return d.substr(0,3)}function f(d){return null!=d?""+d:""}function j(d){return"string"==typeof d}function h(d){return"function"==typeof d}function n(d){return!!d&&"object"==typeof d}function r(d){return"number"==typeof d}function q(d){return n(d)&&!!d.getDay}function e(d){return!0===d||!1===d}function p(d){var a=typeof d;return"object"==a?!(!d||!d.getDay):"string"==a||"number"==a||e(d)}function t(d){return!!d&&null!=d.length&&!j(d)&&!(d&&d.nodeType)&&
!h(d)}function l(d){return d}function u(d){return d+1}function s(d,a,b){return f(d).replace(a,null!=b?b:"")}function Q(d){return s(d,/[\\\[\]\/{}()*+?.$|^-]/g,"\\$&")}function C(d){return s(d,/^\s+|\s+$/g)}function y(d,a){for(var b in d)d.hasOwnProperty(b)&&a(b,d[b]);return d}function A(d,a){if(d)for(var b=0;b<d.length;b++)a(d[b],b);return d}function G(d,a){var b=[];A(d,function(d,c){a(d,c)&&b.push(d)});return b}function R(d,a,b){var c=[];d(a,function(d,a){t(d=b(d,a))?A(d,function(d){c.push(d)}):
null!=d&&c.push(d)});return c}function z(d,a){return R(A,d,a)}function D(d){var a=[];y(d,function(d){a.push(d)});return a}function w(d,a){var b=[];A(d,function(d,c){b.push(a(d,c))});return b}function x(d,a){if(t(d)){var c=K(a);return b(K(d).sub(0,c.length),c)}return null!=a&&d.substr(0,a.length)==a}function B(d,a){if(t(d)){var b=K(a);return K(d).sub(-b.length).equals(b)||!b.length}return null!=a&&d.substr(d.length-a.length)==a}function H(d){var a=d.length;return w(d,function(){return d[--a]})}function I(d,
a,b){if(!d)return[];var c=d.length,g=0>a?c+a:a,k=null==b?c:0<=b?b:c+b;return G(d,function(d,a){return a>=g&&a<k})}function S(d,a){var b={};A(d,function(d){b[d]=a});return b}function E(d,a,b){y(d,function(d,c){if(null==a[d]||!b)a[d]=c});return a}function F(d,a){for(var b=h(a)?a:function(d,b){if(a===d)return b},c,g=0;g<d.length;g++)if(null!=(c=b(d[g],g)))return c}function a(d,a){for(var b=0;b<d.length;b++)if(d[b]==a)return!0;return!1}function b(d,a){var c=h(d)?d():d,g=h(a)?a():a;if(c==g)return!0;if(null==
c||null==g)return!1;if(p(c)||p(g))return q(c)&&q(g)&&c.getTime()==g.getTime();if(t(c))return c.length!=g.length?!1:!F(c,function(d,a){if(!b(d,g[a]))return!0});if(t(g))return!1;var k=D(c),f=k.length,e=0;y(g,function(){e++});return f!=e?!1:!F(k,function(d){if(!b(c[d],g[d]))return!0})}function c(d,a,b){return d.apply(b&&a,w(b||a,l))}function g(d,a,b){return w(d,function(d){return h(d)?c(d,a,b):T})}function k(d,a,b,g){return function(){return c(d,a,z([b,arguments,g],l))}}function v(d,a){return M(a,0,
0,0,d)}function M(d,a,b,c,g,k,e){function p(d){var a=d.length;return a>e?p(d.substr(0,a-e))+(k||",")+d.substr(a-e):d}var f=0>d,v=/(\d+)(\.(.*))?/.exec((f?-d:d).toFixed(a));d=v[1];for(c=(c||".")+v[3];d.length<(g||1);)d="0"+d;e&&(d=p(d));return(f?"-":"")+d+(a?b?s(c,/[.,]?0+$/):c:"")}function V(d,a,b){return null==a||!d?0:60*parseInt(d[a])+parseInt(d[a+1])+b.getTimezoneOffset()}function aa(d,a){if(1==arguments.length)return aa(null,d);if(/^\?/.test(d)){if(""==C(a))return null;d=d.substr(1)}var b,c=(b=
/[0#]([.,])[_9]/.exec(d))?b[1]:(b=/^[.,]$/.exec(d))?b[0]:".";b=parseFloat(s(s(s(a,","==c?/\./g:/,/g),c,"."),/^[^\d-]*(-?\d)/,"$1"));return isNaN(b)?T:b}function ba(d){return new Date(d.getTime())}function W(d,a,b){d["set"+a].call(d,d["get"+a].call(d)+b);return d}function N(d,a,b){return 3>arguments.length?N(new Date,d,a):W(ba(d),a.charAt(0).toUpperCase()+a.substr(1),b)}function U(d,a,b){var c=a.getTime(),g=b.getTime(),k=g-c;if(0>k)return-U(d,b,a);if(a={milliseconds:1,seconds:1E3,minutes:6E4,hours:36E5}[d])return k/
a;a=d.charAt(0).toUpperCase()+d.substr(1);d=Math.floor(k/{fullYear:31536E6,month:2628E6,date:864E5}[d]-2);c=W(new Date(c),a,d);for(k=d;k<1.2*d+4;k++)if(W(c,a,1).getTime()>g)return k}function ca(a){return s(a,/['"\t\n\r]/g,function(a){return ha[a]})}function X(a,b){if(Y[a])return Y[a];var g="with(_.isObject(obj)?obj:{}){"+w(a.split(/{{|}}}?/),function(a,d){var b,c=C(a),g=s(c,/^{/),c=c==g?"esc(":"";if(d%2)return(b=/^each\b(\s+([\w_]+(\s*,\s*[\w_]+)?)\s*:)?(.*)/.exec(g))?"each("+(""==C(b[4])?"this":
b[4])+", function("+b[2]+"){":(b=/^if\b(.*)/.exec(g))?"if("+b[1]+"){":(b=/^else\b\s*(if\b(.*))?/.exec(g))?"}else "+(b[1]?"if("+b[2]+")":"")+"{":(b=/^\/(if)?/.exec(g))?b[1]?"}\n":"});\n":(b=/^#(.*)/.exec(g))?b[1]:(b=/(.*)::\s*(.*)/.exec(g))?"print("+c+'_.formatValue("'+ca(b[2])+'",'+(""==C(b[1])?"this":b[1])+(c&&")")+"));\n":"print("+c+(""==C(g)?"this":g)+(c&&")")+");\n";if(""!=a)return'print("'+ca(a)+'");\n'}).join("")+"}",k=new Function("obj","each","esc","print","_",g);return Y[a]=function(a,d){var g=
[];k.call(d||a,a,function(a,d){t(a)?A(a,function(a,b){d.call(a,a,b)}):y(a,function(a,b){d.call(b,a,b)})},b||l,function(){c(g.push,g,arguments)},K);return g.join("")}}function da(a){return s(a,/[<>'"&]/g,function(a){return"&#"+a.charCodeAt(0)+";"})}function O(a,b){for(var c=0,g=0;g<a.length;g++){var k=a[g];if(b&&t(k))for(var e=0;e<k.length;e++)this[c++]=k[e];else this[c++]=k}this.length=c;this._=!0}function K(){return new O(arguments,!0)}function P(a){return function(b,c){return new O(a(this,b,c))}}
function L(a){return function(b,c){return a(this,b,c)}}function J(a){return function(b,c,g){return new O(a(b,c,g))}}var T,Z="January,February,March,April,May,June,July,August,September,October,November,December".split(/,/),ea=w(Z,m),fa="Sunday,Monday,Tuesday,Wednesday,Thursday,Friday,Saturday".split(/,/),ia=w(fa,m),ga=["am","pm"],ha={'"':'\\"',"'":"\\'","\n":"\\n","\t":"\\t","\r":"\\r"},Y={};E({each:L(A),filter:P(G),collect:P(z),map:P(w),toObject:L(S),equals:L(b),sub:P(I),reverse:P(H),find:L(F),startsWith:L(x),
endsWith:L(B),contains:L(a),call:P(g),array:function(){return w(this,l)},unite:function(){var a=this;return function(){return new O(g(a,arguments))}},join:function(a){return w(this,l).join(a)},sort:function(a){return new O(w(this,l).sort(a))},uniq:function(){var a={};return this.filter(function(b){if(a[b])return!1;a[b]=1;return!0})},intersection:function(a){var b=S(a,1);return this.filter(function(a){var d=b[a];b[a]=0;return d})},tap:function(a){a(this);return this}},O.prototype);E({filter:J(G),collect:J(z),
collectObj:J(function(a,b){return R(y,a,b)}),map:J(w),sub:J(I),reverse:J(H),each:A,toObject:S,find:F,contains:a,startsWith:x,endsWith:B,equals:b,keys:J(D),values:J(function(a,b){var c=[];b?A(b,function(b){c.push(a[b])}):y(a,function(a,b){c.push(b)});return c}),bind:k,partial:function(a,b,c){return k(a,null,b,c)},once:function(a){var b=0;return function(){if(!b++)return c(a,this,arguments)}},nonOp:l,eachObj:y,mapObj:function(a,b){var c={};y(a,function(a,d){c[a]=b(a,d)});return c},filterObj:function(a,
b){var c={};y(a,function(a,d){b(a,d)&&(c[a]=d)});return c},isList:t,isFunction:h,isObject:n,isNumber:r,isBool:e,isDate:q,isValue:p,isString:j,toString:f,toList:function(a){return t(a)?a:null!=a?[a]:[]},dateClone:ba,dateAdd:N,dateDiff:U,dateMidnight:function(a){a=a||new Date;return new Date(a.getFullYear(),a.getMonth(),a.getDate())},formatNumber:M,pad:v,formatValue:function(a,b){a=s(a,/^\?/);if(q(b)){var c,g,k=a,e=b,p={y:["FullYear",l],M:["Month",u],n:["Month",ea],N:["Month",Z],d:["Date",l],m:["Minutes",
l],H:["Hours",l],h:["Hours",function(a){return a%12||12}],K:["Hours",u],k:["Hours",function(a){return a%12+1}],s:["Seconds",l],S:["Milliseconds",l],a:["Hours",function(a,b){return(b||ga)[12>a?0:1]}],w:["Day",ia],W:["Day",fa],z:["TimezoneOffset",function(a){if(c)return c;var b=0<a?a:-a;return(0>a?"+":"-")+v(2,Math.floor(b/60))+v(2,b%60)}]};if(g=/^\[(([+-]\d\d)(\d\d))\]\s*(.*)/.exec(a))c=g[1],e=N(b,"minutes",V(g,2,b)),k=g[4];return s(k,/(\w)(\1*)(?:\[([^\]]+)\])?/g,function(a,b,c,d){if(b=p[b])a=e["get"+
(t(b)?b[0]:b)].call(e),d=d&&d.split(","),a=t(b[1])?(d||b[1])[a]:b[1](a,d),null!=a&&!j(a)&&(a=v(c.length+1,a));return a})}return F(a.split(/\s*\|\s*/),function(a){var c,d;if(c=/^([<>]?)(=?)([^:]*?)\s*:\s*(.*)$/.exec(a)){a=b;var g=parseFloat(c[3]);if(isNaN(g)||!r(a))a=null==a?"null":f(a),g=c[3];if(c[1]){if(!c[2]&&a==g||"<"==c[1]&&a>g||">"==c[1]&&a<g)return null}else if(a!=g)return null;a=c[4]}if(r(b)&&(c=/(?:(0[0.,]*)|(#[#.,]*))(_*)(9*)/.exec(a))){d=f(c[1])+f(c[2]);var g=f(c[1]).length?s(d,/[.,]/g).length:
1,k=s(s(d,/^.*[0#]/),/[^,.]/g),e=f(c[3]).length+f(c[4]).length,p,v;if(d=/([.,])[^.,]+[.,]/.exec(c[0]))p=d[1],v=d[0].length-2;p=M(b,e,f(c[3]).length,k,g,p,v);v=a;a=c.index;c=f(c[0]).length;return v.substr(0,a)+p+v.substr(a+c)}return a})},parseDate:function(a,b){var c={y:0,M:[1,1],n:[1,ea],N:[1,Z],d:2,m:4,H:3,h:3,K:[3,1],k:[3,1],s:5,S:6,a:[3,ga]},g={},k=1,e,p,v;if(/^\?/.test(a)){if(""==C(b))return null;a=a.substr(1)}if(v=/^\[([+-]\d\d)(\d\d)\]\s*(.*)/.exec(a))e=v,a=v[3];if(!(v=RegExp(a.replace(/(.)(\1*)(?:\[([^\]]*)\])?/g,
function(a,b,c,d){return/[dmhkyhs]/i.test(b)?(g[k++]=b,a=c.length+1,"(\\d"+(2>a?"+":"{1,"+a+"}")+")"):"z"==b?(p=k,k+=2,"([+-]\\d\\d)(\\d\\d)"):/[Nna]/.test(b)?(g[k++]=[b,d&&d.split(",")],"([a-zA-Z\u0080\ufffd\u1fff]+)"):/w/i.test(b)?"[a-zA-Z\u0080\ufffd\u1fff]+":/\s/.test(b)?"\\s+":Q(a)})).exec(b)))return T;for(var f=[0,0,0,0,0,0,0],n=1;n<k;n++){var m=v[n],h=g[n];if(t(h)){var l=h[0],j=c[l],q=j[0],h=F(h[1]||j[1],function(a,b){return x(m.toLowerCase(),a.toLowerCase())?b:null});if(null==h)return T;f[q]=
"a"==l?f[q]+12*h:h}else h&&(l=parseInt(m),j=c[h],t(j)?f[j[0]]+=l-j[1]:f[j]+=l)}c=new Date(f[0],f[1],f[2],f[3],f[4],f[5],f[6]);return N(c,"minutes",-V(e,1,c)-V(v,p,c))},parseNumber:aa,copyObj:E,coal:function(){return F(arguments,l)},trim:C,escapeRegExp:Q,escapeHtml:da,format:function(a,b){return X(a)(b)},template:X,htmlTemlplate:function(a){return X(a,da)}},K);return{_:K}});/^u/.test(typeof define)&&(def={},this.define=function(m,f){def[m]=f()},this.require=function(m){return def[m]});
define("minified",function(){function m(a){return null!=a?""+a:""}function f(a){return"string"==typeof a}function j(a){return"function"==typeof a&&!a.item}function h(a){return a&&a.nodeType}function n(a){return a&&null!=a.length&&!f(a)&&!h(a)&&!j(a)}function r(a,b){for(var c in a)a.hasOwnProperty(c)&&b(c,a[c]);return a}function q(a,b){for(var c=0;a&&c<a.length;c++)b(a[c],c);return a}function e(a,b){var c=[];q(a,function(a,k){b(a,k)&&c.push(a)});return c}function p(a,b){var c=[];q(a,function(a,k){n(a=
b(a,k))?q(a,function(a){c.push(a)}):null!=a&&c.push(a)});return c}function t(a,b){var c=[];r(a,function(a,k){n(a=b(a,k))?q(a,function(a){c.push(a)}):null!=a&&c.push(a)});return c}function l(a,b,c){return m(a).replace(b,c||"")}function u(a){return parseFloat(l(a,/^[^\d-]+/))}function s(a){var b={$position:"absolute",$visibility:"hidden",$display:"block",$height:null},c=a.get(b);a.set(b);b=a.get("$height",!0);a.set(c);return b}function Q(a){a()}function C(){q(H,Q);H=null}function y(a){H?H.push(a):x.setTimeout(a,
0)}function A(a,b,c,g){return function(){var k=z(B.createElement(a));n(b)||"object"!=typeof b?k.add(b):k.set(b).add(c);g&&g(k);return k}}function G(){var a,b=[],c=[],g=function(g,k){null==a&&(a=g,b=k,x.setTimeout(function(){q(c,Q)},0))},k=g.then=function(g,k){var e=G(),f=function(){try{var c=a?g:k;if(j(c)){var f=c.apply(null,b);f&&j(f.then)?f.then(function(a){e(!0,[a])},function(a){e(!1,[a])}):e(!0,[f])}else e(a,b)}catch(p){e(!1,[p])}};null!=a?x.setTimeout(f,0):c.push(f);return e};g.always=function(a){return k(a,
a)};g.error=function(a){return k(0,a)};return g}function R(a){return F[a]||"\\u"+("0000"+a.charCodeAt(0).toString(16)).slice(-4)}function z(a,b,c){return j(a)?y(a):new w(D(a,b,c))}function D(a,b,c){function g(a){a=function N(a){return n(a)?p(a,N):a}(a);return k?e(a,function(a){for(;a=a.parentNode;){if(a===k)return!0;if(c)return!1}}):a}var k,h,j,m,q;if(b&&1!=(b=D(b)).length)return p(b,function(b){return D(a,b,c)});k=b&&b[0];if(!f(a))return g(n(a)?a:[a]);if(1<(b=a.split(/\s*,\s*/)).length)return p(b,
function(a){return D(a,k,c)});if(b=/(\S+)\s+(.+)$/.exec(a))return D(b[2],D(b[1],k),c);if(a!=(b=l(a,/^#/)))return g([B.getElementById(b)]);k=k||B;h=(b=/([^.]*)\.?([^.]*)/.exec(a))[1];m=b[2];b=(j=k.getElementsByClassName&&m)?k.getElementsByClassName(m):k.getElementsByTagName(h||"*");if(h=j?h:m)q=RegExp("\\b"+h+"\\b","i"),b=e(b,function(a){return q.test(a[j?"nodeName":"className"])});return k?g(b):b}function w(a){for(var b=this.length=a.length,c=0;c<b;c++)this[c]=a[c]}var x=this,B=document,H=[],I=[],
S=x.requestAnimationFrame||function(a){x.setTimeout(a,33)},E=!!B.all&&!H.map,F={"\t":"\\t","\r":"\\r","\n":"\\n",'"':'\\"',"\\":"\\\\"};r({each:function(a){return q(this,a)},filter:function(a){return new w(e(this,a))},collect:function(a){return new w(p(this,a))},sub:function(a,b){var c=0>a?this.length+a:a,g=0<=b?b:this.length+(b||0);return new w(e(this,function(a,b){return b>=c&&b<g}))},find:function(a){for(var b,c=j(a)?a:function(b,c){if(a===b)return c},g=0;g<this.length;g++)if(null!=(b=c(this[g],
g)))return b},hasClass:function(a){var b=RegExp("\\b"+a+"\\b");return this.find(function(a){return b.test(a.className)?a:null})},remove:function(){q(this,function(a){a.parentNode.removeChild(a)})},text:function(){function a(b){var c=h(b);return 1==c?p(b.childNodes,a):5>c?b.data:null}return p(this,a).join("")},get:function(a,b){var c=this,g=c[0];if(g){if(f(a)){var k=l(a,/^[$@]/),e;e="$"==a?g.className:"$$"==a?E?g.style.cssText:g.getAttribute("style"):/\$\$/.test(a)&&("hidden"==g.style.visibility||
"none"==g.style.display)?0:"$$fade"==a?isNaN(e=E?u(g.style.filter)/100:u(g.style.opacity))?1:e:"$$slide"==a?c.get("$height"):/^\$/.test(a)?x.getComputedStyle?x.getComputedStyle(g,null).getPropertyValue(l(k,/[A-Z]/g,function(a){return"-"+a.toLowerCase()})):(g.currentStyle||g.style)[k]:/^@/.test(a)?g.getAttribute(k):g[k];return b?u(e):e}var p={};(n(a)?q:r)(a,function(a){p[a]=c.get(a,b)});return p}},set:function(a,b){var c=this,g;void 0!==b?"$$fade"==a||"$$slide"==a?c.set({$visibility:0<(g=u(b))?"visible":
"hidden",$display:"block"}).set("$$fade"==a?E?{$filter:"alpha(opacity = "+100*g+")",$zoom:1}:{$opacity:g}:{$height:/px$/.test(b)?b:function(a,b,c){return g*(g&&s(z(c)))+"px"},$overflow:"hidden"}):q(c,function(c,g){var e=l(a,/^[@$]/),f=c.className||"",p=/^\$/.test(a)?c.style:c,h=j(b)?b(z(c).get(a),g,c):b;"$"==a?null!=h&&(q(h.split(/\s+/),function(a){var b=l(a,/^[+-]/),c=f;f=l(f,RegExp("\\b"+b+"\\b"));if(/^\+/.test(a)||b==a&&c==f)f+=" "+b}),c.className=l(f,/^\s+|\s+(?=\s|$)/g)):"$$"==a?E?p.cssText=
h:null!=h?c.setAttribute("style",h):c.removeAttribute("style"):/^@/.test(a)?null!=h?p.setAttribute(e,h):p.removeAttribute(e):p[e]=h}):f(a)||j(a)?c.set("$",a):r(a,function(a,b){c.set(a,b)});return c},add:function(a,b){return q(this,function(c,g){var k;(function M(a){n(a)?q(a,M):j(a)?M(a(c,g)):null!=a&&(a=h(a)?a:B.createTextNode(a),k?k.parentNode.insertBefore(a,k.nextSibling):b?b(a,c,c.parentNode):c.appendChild(a),k=a)})(h(a)&&g?null:a)})},fill:function(a){return q(this,function(a){z(a.childNodes).remove()}).add(a)},
addBefore:function(a){return this.add(a,function(a,c,g){g.insertBefore(a,c)})},addAfter:function(a){return this.add(a,function(a,c,g){g.insertBefore(a,c.nextSibling)})},addFront:function(a){return this.add(a,function(a,c){c.insertBefore(a,c.firstChild)})},replace:function(a){return this.add(a,function(a,c,g){g.replaceChild(a,c)})},clone:function(a){return new w(p(this,function(b){var c=h(b);if(1==c){var g={$:b.className||null,$$:E?b.style.cssText:b.getAttribute("style")};q(b.attributes,function(a){var c=
a.name;"id"!=c&&("style"!=c&&"class"!=c&&b.getAttribute(c))&&(g["@"+c]=a.value)});return A(b.tagName,g,z(b.childNodes).clone(),a)}return 5>c?b.data:null}))},animate:function(a,b,c,g){var e=this,f=[],p=/-?[\d.]+/,h,n=G(),t=j(c)?c:function(a,b,g){return a+g*(b-a)*(c+(1-c)*g*(3-2*g))};g=g||{};g.time=0;g.stop=function(){h();n(!1)};b=b||500;c=c||0;q(e,function(b){var c={o:z(b),e:{}};r(c.s=c.o.get(a),function(b,g){var e=a[b];"$$slide"==b&&(e=e*s(c.o)+"px");c.e[b]=/^[+-]=/.test(e)?l(e.substr(2),p,u(g)+u(l(e,
/\+?=/))):e});f.push(c)});h=z.loop(function(a){function c(a,b){return/^#/.test(a)?parseInt(6<a.length?a.substr(1+2*b,2):(a=a.charAt(1+b))+a,16):parseInt(l(a,/[^\d,]+/g).split(",")[b])}g.time=a;a>=b||0>a?(q(f,function(a){a.o.set(a.e)}),h(),g.time=null,n(!0,[e])):q(f,function(g){r(g.s,function(e,f){var k="rgb(",h=g.e[e],n=a/b;if(/^#|rgb\(/.test(h))for(var j=0;3>j;j++)k+=Math.round(t(c(f,j),c(h,j),n))+(2>j?",":")");else k=l(h,p,m(t(u(f),u(h),n)));g.o.set(e,k)})})});return n},toggle:function(a,b,c,g){var e=
this,f={},h=!1,p=/\b(?=\w)/g;return!b?e.toggle(l(a,p,"-"),l(a,p,"+")):e.set(a)&&function(p){p!==h&&(h=!0===p||!1===p?p:!h,c?e.animate(h?b:a,f.stop?f.stop()||f.time:c,g,f):e.set(h?b:a))}},on:function(a,b,c,g){return q(this,function(e,f){q(a.split(/\s/),function(a){var h=l(a,/\|/),p=function(e){e=e||x.event;if((!b.apply(g?c:e.target,g||c||[e,f])||g)&&a==h)e.stopPropagation&&(e.preventDefault(),e.stopPropagation()),e.returnValue=!1,e.cancelBubble=!0};(b.M=b.M||[]).push({e:e,h:p,n:h});e.addEventListener?
e.addEventListener(h,p,!0):e.attachEvent("on"+h,p)})})}},function(a,b){w.prototype[a]=b});r({request:function(a,b,c,g,e,j){var l,q=c,u=0,s=G();try{l=x.XMLHttpRequest?new XMLHttpRequest:new ActiveXObject("Msxml2.XMLHTTP.3.0"),null!=c&&(g=g||{},!f(c)&&!h(c)&&(q=t(c,function U(a,b){return n(b)?p(b,function(b){return U(a,b)}):encodeURIComponent(a)+(null!=b?"="+encodeURIComponent(b):"")}).join("&")),/post/i.test(a)?!h(c)&&(!f(c)&&!g["Content-Type"])&&(g["Content-Type"]="application/x-www-form-urlencoded"):
(b+="?"+q,q=null)),l.open(a,b,!0,e,j),r(g,function(a,b){l.setRequestHeader(a,b)}),l.onreadystatechange=function(){4==l.readyState&&!u++&&(200==l.status?s(!0,[l.responseText,l.responseXML]):s(!1,[l.status,l.statusText,l.responseText]))},l.send(q)}catch(y){u||s(!1,[0,null,m(y)])}return s},toJSON:function b(c){return null==c?""+c:f(c=c.valueOf())?'"'+l(c,/[\\\"\x00-\x1f\x22\x5c]/g,R)+'"':n(c)?"["+p(c,b).join()+"]":"object"==typeof c?"{"+t(c,function(c,e){return b(c)+":"+b(e)}).join()+"}":m(c)},parseJSON:x.JSON?
x.JSON.parse:function(b){b=l(b,/[\x00\xad\u0600-\uffff]/g,R);if(/^[[\],:{}\s]*$/.test(l(l(b,/\\["\\\/bfnrtu]/g),/"[^"\\\n\r]*"|true|false|null|[\d.eE+-]+/g)))return eval("("+b+")")},ready:y,setCookie:function(b,c,g,e,f,h){B.cookie=b+"="+(h?c:escape(c))+(g?"; expires="+("object"==typeof g?g:new Date((new Date).getTime()+864E5*g)).toUTCString():"")+"; path="+(e?escapeURI(e):"/")+(f?"; domain="+escape(f):"")},getCookie:function(b,c){var g,e=(g=RegExp("(^|;)\\s*"+b+"=([^;]*)").exec(B.cookie))&&g[2];return c?
e:e&&unescape(e)},loop:function(b){var c={c:b,t:(new Date).getTime(),s:function(){for(var b=0;b<I.length;b++)I[b]===c&&I.splice(b--,1)}};2>I.push(c)&&function k(){q(I,function(b){b.c(Math.max(0,(new Date).getTime()-b.t),b.s)}).length&&S(k)}();return c.s},wait:function(b,c){var g=G();x.setTimeout(function(){g(!0,c)},b||0);return g},off:function(b){q(b.M,function(b){b.e.removeEventListener?b.e.removeEventListener(b.n,b.h,!0):b.e.detachEvent("on"+b.n,b.h)});b.M=null}},function(b,c){z[b]=c});x.onload=
C;B.addEventListener&&B.addEventListener("DOMContentLoaded",C,!1);return{$:z,$$:function(b){return D(b)[0]},EE:A}});var _=require("minifiedUtil")._;
function parseSourceSections(m){function f(){return{id:"anon"+j++,src:[],desc:"",requires:{},requiredBy:{},syntax:[],example:[],params:[]}}m=m.split("\n");var j=100,h=[],n=f(),r=!1;_.each(m,function(j){if(r&&/^.*\*\/\s*$/.test(j))r=!1;else if(r){var e=j.replace(/^\s*(\*\s?)?/,"").replace(/\s*$/,""),p=e.match(/^\s*@([a-z]+)/);p?(p=p[1],e=_.trim(e.replace(/^\s*@[a-z]+\s*/,"")),"syntax"==p||"example"==p?n[p].push(e):"requires"==p?e.length&&_.each(e.split(/\s+/),function(e){n.requires[e]=1}):"param"==
p?n.params.push({name:e.replace(/\s.*$/,""),desc:e.replace(/^\S+\s+/,"")}):"return"==p?n.params.push({name:"@return",desc:e}):"function"==p?n.params[n.params.length-1].funcs.push(e):n[p]=""!=e?e:1):n.params.length?n.params[n.params.length-1].desc+="\n"+_.trim(e):n.example.length?n.example[n.example.length-1]+="\n"+e:n.desc+=e+"\n"}else/^\s*\/\*\$/.test(j)&&!/\*\/\s*$/.test(j)&&(r=!0,h.push(n),n=f());n.src.push(j)});h.push(n);return h}
function createSectionMap(m){var f={};_.each(m,function(j){f[j.id]=j});return f}function completeRequirements(m,f){var j=0;_.each(m,function(h){_.eachObj(h.requires,function(n){var m=f[n];if(!m)throw Error('Unknown id in requirement: "'+n+'"');_.eachObj(m.requires,function(f){h.requires[f]||(j++,h.requires[f]=1)})})});0<j?completeRequirements(m,f):_.each(m,function(h){_.eachObj(h.requires,function(j){f[j].requiredBy[h.id]=1})})}
function calculateDependencies(m,f){var j={};_.eachObj(f,function(h){f[h]&&(j[h]=1,_.eachObj(m[h].requires,function(f){j[f]=1}))});return j}function createDefaultConfigurationMap(m,f){var j={};_.each(m,function(h){if(h.configurable&&("default"==h.configurable||f))j[h.id]=1});return j}
function compile(m,f,j){var h="",n=calculateDependencies(f,j),r=[],q=!0;_.filter(m,function(e){return n[e.id]||!(e.configurable||e.dependency)}).each(function(e){_.each(e.src,function(e){if(/^\s*$/.test(e))q||(h+="\n"),q=!0;else{var f=e.match(/^(\s*)\/\/\s*@(cond|condblock)\s+(\!?)(\w*)\s*(.*)$/);if(f&&"cond"==f[2]&&!!n[f[4]]!=("!"==f[3]))h+=f[1]+f[5]+"\n";else{var j=!1,m=!0;f&&"condblock"==f[2]?r.push(!!n[f[4]]!=("!"==f[3])):/^\s*\/\/\s*@condend\b/.test(e)&&(j=!0);for(f=0;f<r.length;f++)if(!r[f]){m=
!1;break}m&&(h+=e+"\n");j&&r.pop()}q=!1}})});return h}function prepareSections(m){m=parseSourceSections(m);var f=createSectionMap(m);completeRequirements(m,f);var j=createDefaultConfigurationMap(m);return{sections:m,sectionMap:f,enabledSections:j}}var CONFIG_START="minified.js config start --",CONFIG_COMMENT="// - ",CONFIG_ALL="All sections.",CONFIG_ALL_EXCEPT="All sections except ",CONFIG_ONLY="Only sections ";
function serializeEnabledSections(m,f){var j=_.filter(m,function(e){return e.configurable}),h=_.filter(_.keys(f),function(e){return f[e]}),n,r=[];h.length==j.length?(n=CONFIG_COMMENT+CONFIG_ALL,r=[]):h.length/3>j.length/2?(n=CONFIG_COMMENT+CONFIG_ALL_EXCEPT,r=_.filter(j,function(e){return!f[e.id]}).collect(function(e){return e.id})):(n=CONFIG_COMMENT+CONFIG_ONLY,r=h);var q="// "+CONFIG_START+" use this comment to re-create configuration in the Builder\n"+n,e=50;_(r).sort().each(function(f){e<f.length?
(e=70,q+="\n// - "+f+", "):(q+=f+", ",e-=f.length+2)});return q=q.replace(/,\s*$/,".\n")}function fixConfig(m,f){_.eachObj(f,function(j){m[j]?_.copyObj(m[j].requires,f):delete f[j]});return f}
function deserializeEnabledSections(m,f,j){function h(e){return RegExp("^"+e.replace(/ /g,"\\s+"))}var n=h(CONFIG_START+".*"),r=h(CONFIG_ALL.replace(/\./,"\\.")),q=h(CONFIG_ALL_EXCEPT+"\\s*"),e=h(CONFIG_ONLY+"\\s*"),p=h(CONFIG_COMMENT);j=j.split("\n");for(var t=0;t<j.length;t++){var l=j[t];if(/^\s*\/\/s*/.test(l)&&(l=l.replace(/^\s*\/\/\s*/,""),n.test(l)&&t+1<j.length)){for(var l="",u=t+1;u<j.length;u++)if(p.test(j[u])){if(l+=j[u].replace(p,""),/\s*\.\s*$/.test(j[u]))break}else break;if(r.test(l))return createDefaultConfigurationMap(m,
!0);l=l.replace(/\s*\.\s*$/,"");if(q.test(l)){var s=createDefaultConfigurationMap(m,!0);_.each(l.replace(q,"").split(/\s*,\s*/),function(e){delete s[e]});return fixConfig(f,s)}if(e.test(l))return s={},_.each(l.replace(e,"").split(/\s*,\s*/),function(e){f[e]&&(s[e]=1)}),fixConfig(f,s)}}return null};var MINI=require("minified"),$=MINI.$,$$=MINI.$$,EE=MINI.EE,_=require("minifiedUtil")._,MAX_SIZE=4095,SRC="/download/minified-web-src.js",GROUPS="INTERNAL SELECTORS ELEMENT REQUEST JSON EVENTS COOKIE ANIMATION OPTIONS".split(" ");
function closureCompile(m,f,j){$.request("post","http://closure-compiler.appspot.com/compile",{js_code:m,output_format:"json",output_info:["compiled_code","statistics"],output_file_name:"minified-custom.js",compilation_level:f?"ADVANCED_OPTIMIZATIONS":"SIMPLE_OPTIMIZATIONS"}).then(function(f){j&&j($.parseJSON(f))},function(f,m,r){window.console&&console.log("error",f,m,r);j&&j(null)}).error(function(f){window.console&&console.log(f)})}
function setUpConfigurationUI(m){function f(){$(".modCheck").each(function(e){var f=0;$(".secCheck",e.parentNode.parentNode).each(function(e){e.checked&&f++});e.checked=0<f})}function j(e){var f=m.sectionMap[e.id.substr(4)];e.checked?_.eachObj(f.requires,function(e){$("#sec-"+e).set("checked",!0)}):_.eachObj(f.requiredBy,function(e){$("#sec-"+e).set("checked",!1)})}$("#compile").on("click",function(){var e={};$(".secCheck").each(function(f){f.checked&&(e[f.id.substr(4)]=1)});var f=compile(m.sections,
m.sectionMap,e),h=serializeEnabledSections(m.sections,e);if($$("#compressionAdvanced").checked)$$("#compile").disabled=!0,closureCompile(f,!0,function(e){$$("#compile").disabled=!1;$("#resultDiv").animate({$$slide:1});e?($("#gzipRow, #downloadRow").set({$display:"table-row"}),$$("#resultSrc").value=h+"\n"+e.compiledCode,$("#resultPlain").fill((e.statistics.compressedSize/1024).toFixed(2)+"kb ("+e.statistics.compressedSize+" bytes)"),$("#resultGzippedSize").fill((e.statistics.compressedGzipSize/1024).toFixed(2)+
"kb ("+e.statistics.compressedGzipSize+" bytes)"),$$("#resultLink").setAttribute("href","http://closure-compiler.appspot.com"+e.outputFilePath),$("#resultGzippedComment").set({$$fade:e.statistics.compressedGzipSize>MAX_SIZE?1:0})):alert("Google Closure Service not availble. Try again later.")});else try{$("#resultDiv").animate({$$slide:1}),$$("#resultSrc").value=h+f,$("#resultPlain").fill((f.length/1024).toFixed(2)+"kb"),$("#gzipRow, #downloadRow").set({$display:"none"})}catch(j){console.log(j)}return!1});
var h=$("#configSrcDiv").toggle({$$slide:0},{$$slide:1});$("#fromScratch").on("|click",h,[!1]);$("#loadConfig").on("|click",h,[!0]);$("#recreate").on("click",function(){try{var e=$$("#configSrc").value,h=deserializeEnabledSections(m.sections,m.sectionMap,e);h?(_.eachObj(m.sectionMap,function(e){var f=$$("#sec-"+e);f&&(f.checked=!!h[e])}),f()):alert("Can not find configuration in source.")}catch(j){console.log(j)}});$("#sectionCheckboxes").fill();for(var n=1;n<GROUPS.length;n++){var r;$("#sectionCheckboxes").add(r=
EE("div",{"@id":"divMod-"+n},EE("div",{className:"groupDescriptor"},[h=EE("input",{"@id":"mod-"+n,className:"modCheck","@type":"checkbox",checked:"checked"})(),EE("label",{"@for":"mod-"+n},GROUPS[n])]))());$(h).on("change",function(){var e=this.checked;$(".secCheck",this.parentNode.parentNode).each(function(f){f.checked=e;j(f)});f();return!0});var q;_.filter(m.sections,function(e){return e.group==GROUPS[n]&&e.configurable}).sort(function(e,f){var h=e.name||e.id,j=f.name||f.id;return h==j?0:h>j?1:
-1}).each(function(e){function h(e,f){var j=_.filter(_.keys(f),function(e){return!!f[e].name});if(!j.length)return null;var n=0,l=e;_.each(j,function(e){n++<Math.min(j.length,8)&&(1<n&&(l=n==Math.min(j.length,8)?l+" and ":l+", "),l=8==n&&8<j.length?l+"more":l+(m.sectionMap[e].name||m.sectionMap[e].id))});return l+="."}var n=h("Required by ",e.requiredBy),l=h("Requires ",e.requires);r.add(EE("div",{className:"sectionDescriptor"},[q=EE("input",{className:"secCheck","@type":"checkbox","@id":"sec-"+e.id,
checked:"default"==e.configurable?"checked":null})(),EE("label",{"@for":"sec-"+e.id},e.name||e.id),EE("div",{className:"requirements"},[n?[n,EE("br")]:null,l])]));$(q).on("change",function(){j(this);f();return!0})})}}
$(function(){var m=/MSIE\s([\d.]+)/i.exec(navigator.userAgent);m&&10>parseInt(m[1])?$("#builderDiv").fill("Sorry, the Builder tool requires at least Internet Explorer 10 (or, alternatively, Chrome or Firefox). Earlier versions lack CORS support required to use Google Closure's web service."):$.request("get",SRC,null).then(function(f){setUpConfigurationUI(prepareSections(f))}).error(function(f){window.console&&console.log(f)})});
