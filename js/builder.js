if(/^u/.test(typeof define)){var def={};this.define=function(l,d){def[l]=d()};this.require=function(l){return def[l]}}
define("minifiedUtil",function(){function l(e){return e.substr(0,3)}function d(e){return null!=e?""+e:""}function j(e){return"string"==typeof e}function p(e){return"function"==typeof e}function g(e){return!!e&&"object"==typeof e}function r(e){return"number"==typeof e}function q(e){return g(e)&&!!e.getDay}function h(e){return!0===e||!1===e}function k(e){var a=typeof e;return"object"==a?!(!e||!e.getDay):"string"==a||"number"==a||h(e)}function t(e){return!!e&&null!=e.length&&!j(e)&&!(e&&e.nodeType)&&
!p(e)}function n(e){return e}function u(e){return e+1}function s(e,a,b){return d(e).replace(a,null!=b?b:"")}function Q(e){return s(e,/[\\\[\]\/{}()*+?.$|^-]/g,"\\$&")}function C(e){return s(e,/^\s+|\s+$/g)}function y(e,a){for(var b in e)e.hasOwnProperty(b)&&a(b,e[b]);return e}function z(e,a){if(e)for(var b=0;b<e.length;b++)a(e[b],b);return e}function G(e,a){var b=[];z(e,function(e,c){a(e,c)&&b.push(e)});return b}function R(e,a,b){var c=[];e(a,function(e,a){t(e=b(e,a))?z(e,function(e){c.push(e)}):
null!=e&&c.push(e)});return c}function A(e,a){return R(z,e,a)}function D(e){var a=[];y(e,function(e){a.push(e)});return a}function v(e,a){var b=[];z(e,function(e,c){b.push(a(e,c))});return b}function w(e,a,b){var c=a;z(e,function(e,a){c=b(c,e,a)});return c}function B(e,a){if(t(e)){var b=L(a);return c(L(e).sub(0,b.length),b)}return null!=a&&e.substr(0,a.length)==a}function H(e,a){if(t(e)){var b=L(a);return L(e).sub(-b.length).equals(b)||!b.length}return null!=a&&e.substr(e.length-a.length)==a}function I(e){var a=
e.length;return v(e,function(){return e[--a]})}function U(e,a,b){var c=e.length,f=0>a?c+a:a,m=null==b?c:0<=b?b:c+b;return G(e,function(e,a){return a>=f&&a<m})}function E(e,a){var b={};z(e,function(e){b[e]=a});return b}function S(e,a,b){y(e,function(e,c){if(null==a[e]||!b)a[e]=c});return a}function a(e,a){for(var b=p(a)?a:function(e,b){if(a===e)return b},c,f=0;f<e.length;f++)if(null!=(c=b(e[f],f)))return c}function b(e,a){if(t(e))for(var b=0;b<e.length;b++)if(e[b]==a)return!0;return!1}function c(e,
b){var f=p(e)?e():e,m=p(b)?b():b;if(f==m)return!0;if(null==f||null==m)return!1;if(k(f)||k(m))return q(f)&&q(m)&&f.getTime()==m.getTime();if(t(f))return f.length!=m.length?!1:!a(f,function(e,a){if(!c(e,m[a]))return!0});if(t(m))return!1;var d=D(f),h=d.length,g=0;y(m,function(){g++});return h!=g?!1:!a(d,function(e){if(!c(f[e],m[e]))return!0})}function f(e,a,b){return e.apply(b&&a,v(b||a,n))}function m(e,a,b){return v(e,function(e){return p(e)?f(e,a,b):V})}function x(e,a,b,c){return function(){return f(e,
a,A([b,arguments,c],n))}}function M(e,a){return F(a,0,0,0,e)}function F(e,a,b,c,f,m,d){function k(e){var a=e.length;return a>d?k(e.substr(0,a-d))+(m||",")+e.substr(a-d):e}var g=0>e,h=/(\d+)(\.(.*))?/.exec((g?-e:e).toFixed(a));e=h[1];for(c=(c||".")+h[3];e.length<(f||1);)e="0"+e;d&&(e=k(e));return(g?"-":"")+e+(a?b?s(c,/[.,]?0+$/):c:"")}function X(e,a,b){return null==a||!e?0:60*parseInt(e[a])+parseInt(e[a+1])+b.getTimezoneOffset()}function aa(e,a){if(1==arguments.length)return aa(null,e);if(/^\?/.test(e)){if(""==
C(a))return null;e=e.substr(1)}var b,c=(b=/[0#]([.,])[_9]/.exec(e))?b[1]:(b=/^[.,]$/.exec(e))?b[0]:".";b=parseFloat(s(s(s(a,","==c?/\./g:/,/g),c,"."),/^[^\d-]*(-?\d)/,"$1"));return isNaN(b)?V:b}function ba(e){return new Date(e.getTime())}function T(e,a,b){e["set"+a].call(e,e["get"+a].call(e)+b);return e}function N(a,b,c){return 3>arguments.length?N(new Date,a,b):T(ba(a),b.charAt(0).toUpperCase()+b.substr(1),c)}function ca(a,b,c){var f=b.getTime(),m=c.getTime(),d=m-f;if(0>d)return-ca(a,c,b);if(b={milliseconds:1,
seconds:1E3,minutes:6E4,hours:36E5}[a])return d/b;b=a.charAt(0).toUpperCase()+a.substr(1);a=Math.floor(d/{fullYear:31536E6,month:2628E6,date:864E5}[a]-2);f=T(new Date(f),b,a);for(d=a;d<1.2*a+4;d++)if(T(f,b,1).getTime()>m)return d}function da(a){return s(a,/['"\t\n\r]/g,function(a){return ia[a]})}function Y(a,b){if(W[a])return W[a];var c="with(_.isObject(obj)?obj:{}){"+v(a.split(/{{|}}}?/),function(a,e){var b,c=C(a),f=s(c,/^{/),c=c==f?"esc(":"";if(e%2)return(b=/^each\b(.*)/.exec(f))?"each("+(""==C(b[1])?
"this":b[1])+", function(key, value, index){":(b=/^if\b(.*)/.exec(f))?"if("+b[1]+"){":(b=/^else\b\s*(if\b(.*))?/.exec(f))?"}else "+(b[1]?"if("+b[2]+")":"")+"{":(b=/^\/(if)?/.exec(f))?b[1]?"}\n":"});\n":(b=/^#(.*)/.exec(f))?b[1]:(b=/(.*)::\s*(.*)/.exec(f))?"print("+c+'_.formatValue("'+da(b[2])+'",'+(""==C(b[1])?"this":b[1])+(c&&")")+"));\n":"print("+c+(""==C(f)?"this":f)+(c&&")")+");\n";if(""!=a)return'print("'+da(a)+'");\n'}).join("")+"}",m=new Function("obj","each","esc","print","_",c);return W[a]=
function(a,e){var c=[];m.call(e||a,a,function(a,b){t(a)?z(a,function(a,e){b.call(a,e,a,e)}):y(a,function(a,e){b.call(e,a,e,a)})},b||n,function(){f(c.push,c,arguments)},L);return c.join("")}}function ea(a){return s(a,/[<>'"&]/g,function(a){return"&#"+a.charCodeAt(0)+";"})}function O(a,b){for(var c=0,f=0;f<a.length;f++){var m=a[f];if(b&&t(m))for(var d=0;d<m.length;d++)this[c++]=m[d];else this[c++]=m}this.length=c;this._=!0}function L(){return new O(arguments,!0)}function P(a){return function(b,c){return new O(a(this,
b,c))}}function J(a){return function(b,c){return a(this,b,c)}}function K(a){return function(b,c,f){return new O(a(b,c,f))}}var V,Z="January,February,March,April,May,June,July,August,September,October,November,December".split(/,/),fa=v(Z,l),ga="Sunday,Monday,Tuesday,Wednesday,Thursday,Friday,Saturday".split(/,/),ja=v(ga,l),ha=["am","pm"],ia={'"':'\\"',"'":"\\'","\n":"\\n","\t":"\\t","\r":"\\r"},W={},W={};S({each:J(z),filter:P(G),collect:P(A),map:P(v),reduce:J(w),toObject:J(E),equals:J(c),sub:P(U),
reverse:P(I),find:J(a),startsWith:J(B),endsWith:J(H),contains:J(b),call:P(m),array:function(){return v(this,n)},func:function(){var a=this;return function(){return new O(m(a,arguments))}},join:function(a){return v(this,n).join(a)},sort:function(a){return new O(v(this,n).sort(a))},uniq:function(){var a={};return this.filter(function(b){if(a[b])return!1;a[b]=1;return!0})},intersection:function(a){var b=E(a,1);return this.filter(function(a){var e=b[a];b[a]=0;return e})},tap:function(a){a(this);return this}},
O.prototype);S({filter:K(G),collect:K(A),collectObj:K(function(a,b){return R(y,a,b)}),map:K(v),sub:K(U),reverse:K(I),each:z,toObject:E,reduce:w,find:a,contains:b,startsWith:B,endsWith:H,equals:c,keys:K(D),values:K(function(a,b){var c=[];b?z(b,function(b){c.push(a[b])}):y(a,function(a,b){c.push(b)});return c}),bind:x,partial:function(a,b,c){return x(a,null,b,c)},once:function(a){var b=0;return function(){if(!b++)return f(a,this,arguments)}},nonOp:n,eachObj:y,mapObj:function(a,b){var c={};y(a,function(a,
e){c[a]=b(a,e)});return c},filterObj:function(a,b){var c={};y(a,function(a,e){b(a,e)&&(c[a]=e)});return c},isList:t,isFunction:p,isObject:g,isNumber:r,isBool:h,isDate:q,isValue:k,isString:j,toString:d,dateClone:ba,dateAdd:N,dateDiff:ca,dateMidnight:function(a){a=a||new Date;return new Date(a.getFullYear(),a.getMonth(),a.getDate())},formatNumber:F,pad:M,formatValue:function(b,c){b=s(b,/^\?/);if(q(c)){var f,m,k=b,g=c,h={y:["FullYear",n],M:["Month",u],n:["Month",fa],N:["Month",Z],d:["Date",n],m:["Minutes",
n],H:["Hours",n],h:["Hours",function(a){return a%12||12}],K:["Hours",u],k:["Hours",function(a){return a%12+1}],s:["Seconds",n],S:["Milliseconds",n],a:["Hours",function(a,b){return(b||ha)[12>a?0:1]}],w:["Day",ja],W:["Day",ga],z:["TimezoneOffset",function(a){if(f)return f;var b=0<a?a:-a;return(0>a?"+":"-")+M(2,Math.floor(b/60))+M(2,b%60)}]};if(m=/^\[(([+-]\d\d)(\d\d))\]\s*(.*)/.exec(b))f=m[1],g=N(c,"minutes",X(m,2,c)),k=m[4];return s(k,/(\w)(\1*)(?:\[([^\]]+)\])?/g,function(a,b,c,e){if(b=h[b])a=g["get"+
(t(b)?b[0]:b)].call(g),e=e&&e.split(","),a=t(b[1])?(e||b[1])[a]:b[1](a,e),null!=a&&!j(a)&&(a=M(c.length+1,a));return a})}return a(b.split(/\s*\|\s*/),function(a){var b,e;if(b=/^([<>]?)(=?)([^:]*?)\s*:\s*(.*)$/.exec(a)){a=c;var f=parseFloat(b[3]);if(isNaN(f)||!r(a))a=null==a?"null":d(a),f=b[3];if(b[1]){if(!b[2]&&a==f||"<"==b[1]&&a>f||">"==b[1]&&a<f)return null}else if(a!=f)return null;a=b[4]}if(r(c)&&(b=/(?:(0[0.,]*)|(#[#.,]*))(_*)(9*)/.exec(a))){e=d(b[1])+d(b[2]);var f=d(b[1]).length?s(e,/[.,]/g).length:
1,m=s(s(e,/^.*[0#]/),/[^,.]/g),g=d(b[3]).length+d(b[4]).length,k,h;if(e=/([.,])[^.,]+[.,]/.exec(b[0]))k=e[1],h=e[0].length-2;k=F(c,g,d(b[3]).length,m,f,k,h);h=a;a=b.index;b=d(b[0]).length;return h.substr(0,a)+k+h.substr(a+b)}return a})},parseDate:function(b,c){var f={y:0,M:[1,1],n:[1,fa],N:[1,Z],d:2,m:4,H:3,h:3,K:[3,1],k:[3,1],s:5,S:6,a:[3,ha]},m={},d=1,k,h,g;if(/^\?/.test(b)){if(""==C(c))return null;b=b.substr(1)}if(g=/^\[([+-]\d\d)(\d\d)\]\s*(.*)/.exec(b))k=g,b=g[3];if(!(g=RegExp(b.replace(/(.)(\1*)(?:\[([^\]]*)\])?/g,
function(a,b,c,e){return/[dmhkyhs]/i.test(b)?(m[d++]=b,a=c.length+1,"(\\d"+(2>a?"+":"{1,"+a+"}")+")"):"z"==b?(h=d,d+=2,"([+-]\\d\\d)(\\d\\d)"):/[Nna]/.test(b)?(m[d++]=[b,e&&e.split(",")],"([a-zA-Z\u0080\ufffd\u1fff]+)"):/w/i.test(b)?"[a-zA-Z\u0080\ufffd\u1fff]+":/\s/.test(b)?"\\s+":Q(a)})).exec(c)))return V;for(var x=[0,0,0,0,0,0,0],l=1;l<d;l++){var p=g[l],n=m[l];if(t(n)){var F=n[0],j=f[F],q=j[0],n=a(n[1]||j[1],function(a,b){return B(p.toLowerCase(),a.toLowerCase())?b:null});if(null==n)return V;x[q]=
"a"==F?x[q]+12*n:n}else n&&(F=parseInt(p),j=f[n],t(j)?x[j[0]]+=F-j[1]:x[j]+=F)}f=new Date(x[0],x[1],x[2],x[3],x[4],x[5],x[6]);return N(f,"minutes",-X(k,1,f)-X(g,h,f))},parseNumber:aa,copyObj:S,coal:function(){return a(arguments,n)},trim:C,escapeRegExp:Q,escapeHtml:ea,format:function(a,b){return Y(a)(b)},template:Y,htmlTemlplate:function(a){return Y(a,ea)}},L);return{_:L}});/^u/.test(typeof define)&&(def={},this.define=function(l,d){def[l]=d()},this.require=function(l){return def[l]});
define("minified",function(){function l(a){return null!=a?""+a:""}function d(a){return"string"==typeof a}function j(a){return"function"==typeof a&&!a.item}function p(a){return a&&a.nodeType}function g(a){return a&&null!=a.length&&!d(a)&&!p(a)&&!j(a)}function r(a,b){for(var c in a)a.hasOwnProperty(c)&&b(c,a[c]);return a}function q(a,b){for(var c=0;a&&c<a.length;c++)b(a[c],c);return a}function h(a,b){var c=[];q(a,function(a,m){b(a,m)&&c.push(a)});return c}function k(a,b){var c=[];q(a,function(a,m){g(a=
b(a,m))?q(a,function(a){c.push(a)}):null!=a&&c.push(a)});return c}function t(a,b){var c=[];r(a,function(a,m){g(a=b(a,m))?q(a,function(a){c.push(a)}):null!=a&&c.push(a)});return c}function n(a,b,c){return l(a).replace(b,c||"")}function u(a){return parseFloat(n(a,/^[^\d-]+/))}function s(a){var b={$position:"absolute",$visibility:"hidden",$display:"block",$height:null},c=a.get(b);a.set(b);b=a.get("$height",!0);a.set(c);return b}function Q(a){a()}function C(){q(H,Q);H=null}function y(a){H?H.push(a):w.setTimeout(a,
0)}function z(a,b,c,f){return function(){var m=A(B.createElement(a));g(b)||"object"!=typeof b?m.add(b):m.set(b).add(c);f&&f(m);return m}}function G(){var a,b=[],c=[],f=function(f,m){null==a&&(a=f,b=m,w.setTimeout(function(){q(c,Q)},0))},m=f.then=function(f,m){var d=G(),g=function(){try{var c=a?f:m;if(j(c)){var g=c.apply(null,b);g&&j(g.then)?g.then(function(a){d(!0,[a])},function(a){d(!1,[a])}):d(!0,[g])}else d(a,b)}catch(k){d(!1,[k])}};null!=a?w.setTimeout(g,0):c.push(g);return d};f.always=function(a){return m(a,
a)};f.error=function(a){return m(0,a)};return f}function R(a){return S[a]||"\\u"+("0000"+a.charCodeAt(0).toString(16)).slice(-4)}function A(a,b,c){return j(a)?y(a):new v(D(a,b,c))}function D(a,b,c){function f(a){a=function T(a){return g(a)?k(a,T):a}(a);return m?h(a,function(a){for(;a=a.parentNode;){if(a===m)return!0;if(c)return!1}}):a}var m,j,l,p,q;if(b&&1!=(b=D(b)).length)return k(b,function(b){return D(a,b,c)});m=b&&b[0];if(!d(a))return f(g(a)?a:[a]);if(1<(b=a.split(/\s*,\s*/)).length)return k(b,
function(a){return D(a,m,c)});if(b=/(\S+)\s+(.+)$/.exec(a))return D(b[2],D(b[1],m),c);if(a!=(b=n(a,/^#/)))return f([B.getElementById(b)]);m=m||B;j=(b=/([^.]*)\.?([^.]*)/.exec(a))[1];p=b[2];b=(l=m.getElementsByClassName&&p)?m.getElementsByClassName(p):m.getElementsByTagName(j||"*");if(j=l?j:p)q=RegExp("\\b"+j+"\\b","i"),b=h(b,function(a){return q.test(a[l?"nodeName":"className"])});return m?f(b):b}function v(a){for(var b=this.length=a.length,c=0;c<b;c++)this[c]=a[c]}var w=this,B=document,H=[],I=[],
U=w.requestAnimationFrame||function(a){w.setTimeout(a,33)},E=!!B.all&&!H.map,S={"\t":"\\t","\r":"\\r","\n":"\\n",'"':'\\"',"\\":"\\\\"};r({each:function(a){return q(this,a)},filter:function(a){return new v(h(this,a))},collect:function(a){return new v(k(this,a))},sub:function(a,b){var c=0>a?this.length+a:a,f=0<=b?b:this.length+(b||0);return new v(h(this,function(a,b){return b>=c&&b<f}))},find:function(a){for(var b,c=j(a)?a:function(b,c){if(a===b)return c},f=0;f<this.length;f++)if(null!=(b=c(this[f],
f)))return b},hasClass:function(a){var b=RegExp("\\b"+a+"\\b");return this.find(function(a){return b.test(a.className)?a:null})},remove:function(){q(this,function(a){a.parentNode.removeChild(a)})},text:function(){function a(b){var c=p(b);return 1==c?k(b.childNodes,a):5>c?b.data:null}return k(this,a).join("")},get:function(a,b){var c=this,f=c[0];if(f){if(d(a)){var m=n(a,/^[$@]/),k;k="$"==a?f.className:"$$"==a?E?f.style.cssText:f.getAttribute("style"):/\$\$/.test(a)&&("hidden"==f.style.visibility||
"none"==f.style.display)?0:"$$fade"==a?isNaN(k=E?u(f.style.filter)/100:u(f.style.opacity))?1:k:"$$slide"==a?c.get("$height"):/^\$/.test(a)?w.getComputedStyle?w.getComputedStyle(f,null).getPropertyValue(n(m,/[A-Z]/g,function(a){return"-"+a.toLowerCase()})):(f.currentStyle||f.style)[m]:/^@/.test(a)?f.getAttribute(m):f[m];return b?u(k):k}var h={};(g(a)?q:r)(a,function(a){h[a]=c.get(a,b)});return h}},set:function(a,b){var c=this,f;void 0!==b?"$$fade"==a||"$$slide"==a?c.set({$visibility:0<(f=u(b))?"visible":
"hidden",$display:"block"}).set("$$fade"==a?E?{$filter:"alpha(opacity = "+100*f+")",$zoom:1}:{$opacity:f}:{$height:/px$/.test(b)?b:function(a,b,c){return f*(f&&s(A(c)))+"px"},$overflow:"hidden"}):q(c,function(c,f){var d=n(a,/^[@$]/),g=c.className||"",k=/^\$/.test(a)?c.style:c,h=j(b)?b(A(c).get(a),f,c):b;"$"==a?null!=h&&(q(h.split(/\s+/),function(a){var b=n(a,/^[+-]/),c=g;g=n(g,RegExp("\\b"+b+"\\b"));if(/^\+/.test(a)||b==a&&c==g)g+=" "+b}),c.className=n(g,/^\s+|\s+(?=\s|$)/g)):"$$"==a?E?k.cssText=
h:null!=h?c.setAttribute("style",h):c.removeAttribute("style"):/^@/.test(a)?null!=h?k.setAttribute(d,h):k.removeAttribute(d):k[d]=h}):d(a)||j(a)?c.set("$",a):r(a,function(a,b){c.set(a,b)});return c},add:function(a,b){return q(this,function(c,f){var m;(function M(a){g(a)?q(a,M):j(a)?M(a(c,f)):null!=a&&(a=p(a)?a:B.createTextNode(a),m?m.parentNode.insertBefore(a,m.nextSibling):b?b(a,c,c.parentNode):c.appendChild(a),m=a)})(p(a)&&f?null:a)})},fill:function(a){return q(this,function(a){A(a.childNodes).remove()}).add(a)},
addBefore:function(a){return this.add(a,function(a,c,f){f.insertBefore(a,c)})},addAfter:function(a){return this.add(a,function(a,c,f){f.insertBefore(a,c.nextSibling)})},addFront:function(a){return this.add(a,function(a,c){c.insertBefore(a,c.firstChild)})},replace:function(a){return this.add(a,function(a,c,f){f.replaceChild(a,c)})},clone:function(a){return new v(k(this,function(b){var c=p(b);if(1==c){var f={$:b.className||null,$$:E?b.style.cssText:b.getAttribute("style")};q(b.attributes,function(a){var c=
a.name;"id"!=c&&("style"!=c&&"class"!=c&&b.getAttribute(c))&&(f["@"+c]=a.value)});return z(b.tagName,f,A(b.childNodes).clone(),a)}return 5>c?b.data:null}))},animate:function(a,b,c,f){var m=this,d=[],g=/-?[\d.]+/,k,h=G(),p=j(c)?c:function(a,b,f){return a+f*(b-a)*(c+(1-c)*f*(3-2*f))};f=f||{};f.time=0;f.stop=function(){k();h(!1)};b=b||500;c=c||0;q(m,function(b){var c={o:A(b),e:{}};r(c.s=c.o.get(a),function(b,f){var d=a[b];"$$slide"==b&&(d=d*s(c.o)+"px");c.e[b]=/^[+-]=/.test(d)?n(d.substr(2),g,u(f)+u(n(d,
/\+?=/))):d});d.push(c)});k=A.loop(function(a){function c(a,b){return/^#/.test(a)?parseInt(6<a.length?a.substr(1+2*b,2):(a=a.charAt(1+b))+a,16):parseInt(n(a,/[^\d,]+/g).split(",")[b])}f.time=a;a>=b||0>a?(q(d,function(a){a.o.set(a.e)}),k(),f.time=null,h(!0,[m])):q(d,function(f){r(f.s,function(d,m){var k="rgb(",h=f.e[d],j=a/b;if(/^#|rgb\(/.test(h))for(var q=0;3>q;q++)k+=Math.round(p(c(m,q),c(h,q),j))+(2>q?",":")");else k=n(h,g,l(p(u(m),u(h),j)));f.o.set(d,k)})})});return h},toggle:function(a,b,c,f){var d=
this,k={},g=!1,h=/\b(?=\w)/g;return!b?d.toggle(n(a,h,"-"),n(a,h,"+")):d.set(a)&&function(h){h!==g&&(g=!0===h||!1===h?h:!g,c?d.animate(g?b:a,k.stop?k.stop()||k.time:c,f,k):d.set(g?b:a))}},on:function(a,b,c,f){return q(this,function(d,h){q(a.split(/\s/),function(a){var k=n(a,/\|/),g=function(d){d=d||w.event;if((!b.apply(f?c:d.target,f||c||[d,h])||f)&&a==k)d.stopPropagation&&(d.preventDefault(),d.stopPropagation()),d.returnValue=!1,d.cancelBubble=!0};(b.M=b.M||[]).push({e:d,h:g,n:k});d.addEventListener?
d.addEventListener(k,g,!0):d.attachEvent("on"+k,g)})})}},function(a,b){v.prototype[a]=b});r({request:function(a,b,c,f,h,j){var n,q=c,u=0,s=G();try{n=w.XMLHttpRequest?new XMLHttpRequest:new ActiveXObject("Msxml2.XMLHTTP.3.0"),null!=c&&(f=f||{},!d(c)&&!p(c)&&(q=t(c,function N(a,b){return g(b)?k(b,function(b){return N(a,b)}):encodeURIComponent(a)+(null!=b?"="+encodeURIComponent(b):"")}).join("&")),/post/i.test(a)?!p(c)&&(!d(c)&&!f["Content-Type"])&&(f["Content-Type"]="application/x-www-form-urlencoded"):
(b+="?"+q,q=null)),n.open(a,b,!0,h,j),r(f,function(a,b){n.setRequestHeader(a,b)}),n.onreadystatechange=function(){4==n.readyState&&!u++&&(200==n.status?s(!0,[n.responseText,n.responseXML]):s(!1,[n.status,n.statusText,n.responseText]))},n.send(q)}catch(y){u||s(!1,[0,null,l(y)])}return s},toJSON:function b(c){return null==c?""+c:d(c=c.valueOf())?'"'+n(c,/[\\\"\x00-\x1f\x22\x5c]/g,R)+'"':g(c)?"["+k(c,b).join()+"]":"object"==typeof c?"{"+t(c,function(c,d){return b(c)+":"+b(d)}).join()+"}":l(c)},parseJSON:w.JSON?
w.JSON.parse:function(b){b=n(b,/[\x00\xad\u0600-\uffff]/g,R);if(/^[[\],:{}\s]*$/.test(n(n(b,/\\["\\\/bfnrtu]/g),/"[^"\\\n\r]*"|true|false|null|[\d.eE+-]+/g)))return eval("("+b+")")},ready:y,setCookie:function(b,c,f,d,h,k){B.cookie=b+"="+(k?c:escape(c))+(f?"; expires="+("object"==typeof f?f:new Date((new Date).getTime()+864E5*f)).toUTCString():"")+"; path="+(d?escapeURI(d):"/")+(h?"; domain="+escape(h):"")},getCookie:function(b,c){var f,d=(f=RegExp("(^|;)\\s*"+b+"=([^;]*)").exec(B.cookie))&&f[2];return c?
d:d&&unescape(d)},loop:function(b){var c={c:b,t:(new Date).getTime(),s:function(){for(var b=0;b<I.length;b++)I[b]===c&&I.splice(b--,1)}};2>I.push(c)&&function m(){q(I,function(b){b.c(Math.max(0,(new Date).getTime()-b.t),b.s)}).length&&U(m)}();return c.s},wait:function(b){var c=G();w.setTimeout(function(){c(!0,[b])},b||0);return c},off:function(b){q(b.M,function(b){b.e.removeEventListener?b.e.removeEventListener(b.n,b.h,!0):b.e.detachEvent("on"+b.n,b.h)});b.M=null}},function(b,c){A[b]=c});w.onload=
C;B.addEventListener&&B.addEventListener("DOMContentLoaded",C,!1);return{$:A,$$:function(b){return D(b)[0]},EE:z}});var _=require("minifiedUtil")._;
function parseSourceSections(l){function d(){return{id:"anon"+j++,src:[],desc:"",requires:{},requiredBy:{},syntax:[],example:[],params:[]}}l=l.split("\n");var j=100,p=[],g=d(),r=!1;_.each(l,function(j){if(r&&/^.*\*\/\s*$/.test(j))r=!1;else if(r){var h=j.replace(/^\s*(\*\s?)?/,"").replace(/\s*$/,""),k=h.match(/^\s*@([a-z]+)/);k?(k=k[1],h=_.trim(h.replace(/^\s*@[a-z]+\s*/,"")),"syntax"==k||"example"==k?g[k].push(h):"requires"==k?h.length&&_.each(h.split(/\s+/),function(d){g.requires[d]=1}):"param"==
k?g.params.push({name:h.replace(/\s.*$/,""),desc:h.replace(/^\S+\s+/,"")}):"return"==k?g.params.push({name:"@return",desc:h}):"function"==k?g.params[g.params.length-1].funcs.push(h):g[k]=""!=h?h:1):g.params.length?g.params[g.params.length-1].desc+="\n"+_.trim(h):g.example.length?g.example[g.example.length-1]+="\n"+h:g.desc+=h+"\n"}else/^\s*\/\*\$/.test(j)&&!/\*\/\s*$/.test(j)&&(r=!0,p.push(g),g=d());g.src.push(j)});p.push(g);return p}
function createSectionMap(l){var d={};_.each(l,function(j){d[j.id]=j});return d}function completeRequirements(l,d){var j=0;_.each(l,function(p){_.eachObj(p.requires,function(g){var l=d[g];if(!l)throw Error('Unknown id in requirement: "'+g+'"');_.eachObj(l.requires,function(d){p.requires[d]||(j++,p.requires[d]=1)})})});0<j?completeRequirements(l,d):_.each(l,function(j){_.eachObj(j.requires,function(g){d[g].requiredBy[j.id]=1})})}
function calculateDependencies(l,d){var j={};_.eachObj(d,function(p){d[p]&&(j[p]=1,_.eachObj(l[p].requires,function(d){j[d]=1}))});return j}function createDefaultConfigurationMap(l,d){var j={};_.each(l,function(l){if(l.configurable&&("default"==l.configurable||d))j[l.id]=1});return j}
function compile(l,d,j){var p="",g=calculateDependencies(d,j),r=[],q=!0;_.filter(l,function(d){return g[d.id]||!(d.configurable||d.dependency)}).each(function(d){_.each(d.src,function(d){if(/^\s*$/.test(d))q||(p+="\n"),q=!0;else{var h=d.match(/^(\s*)\/\/\s*@(cond|condblock)\s+(\!?)(\w*)\s*(.*)$/);if(h&&"cond"==h[2]&&!!g[h[4]]!=("!"==h[3]))p+=h[1]+h[5]+"\n";else{var j=!1,l=!0;h&&"condblock"==h[2]?r.push(!!g[h[4]]!=("!"==h[3])):/^\s*\/\/\s*@condend\b/.test(d)&&(j=!0);for(h=0;h<r.length;h++)if(!r[h]){l=
!1;break}l&&(p+=d+"\n");j&&r.pop()}q=!1}})});return p}function prepareSections(l){l=parseSourceSections(l);var d=createSectionMap(l);completeRequirements(l,d);var j=createDefaultConfigurationMap(l);return{sections:l,sectionMap:d,enabledSections:j}}var CONFIG_START="minified.js config start --",CONFIG_COMMENT="// - ",CONFIG_ALL="All sections.",CONFIG_ALL_EXCEPT="All sections except ",CONFIG_ONLY="Only sections ";
function serializeEnabledSections(l,d){var j=_.filter(l,function(d){return d.configurable}),p=_.filter(_.keys(d),function(h){return d[h]}),g,r=[];p.length==j.length?(g=CONFIG_COMMENT+CONFIG_ALL,r=[]):p.length/3>j.length/2?(g=CONFIG_COMMENT+CONFIG_ALL_EXCEPT,r=_.filter(j,function(h){return!d[h.id]}).collect(function(d){return d.id})):(g=CONFIG_COMMENT+CONFIG_ONLY,r=p);var q="// "+CONFIG_START+" use this comment to re-create configuration in the Builder\n"+g,h=50;_(r).sort().each(function(d){h<d.length?
(h=70,q+="\n// - "+d+", "):(q+=d+", ",h-=d.length+2)});return q=q.replace(/,\s*$/,".\n")}function fixConfig(l,d){_.eachObj(d,function(j){l[j]?_.copyObj(l[j].requires,d):delete d[j]});return d}
function deserializeEnabledSections(l,d,j){function p(d){return RegExp("^"+d.replace(/ /g,"\\s+"))}var g=p(CONFIG_START+".*"),r=p(CONFIG_ALL.replace(/\./,"\\.")),q=p(CONFIG_ALL_EXCEPT+"\\s*"),h=p(CONFIG_ONLY+"\\s*"),k=p(CONFIG_COMMENT);j=j.split("\n");for(var t=0;t<j.length;t++){var n=j[t];if(/^\s*\/\/s*/.test(n)&&(n=n.replace(/^\s*\/\/\s*/,""),g.test(n)&&t+1<j.length)){for(var n="",u=t+1;u<j.length;u++)if(k.test(j[u])){if(n+=j[u].replace(k,""),/\s*\.\s*$/.test(j[u]))break}else break;if(r.test(n))return createDefaultConfigurationMap(l,
!0);n=n.replace(/\s*\.\s*$/,"");if(q.test(n)){var s=createDefaultConfigurationMap(l,!0);_.each(n.replace(q,"").split(/\s*,\s*/),function(d){delete s[d]});return fixConfig(d,s)}if(h.test(n))return s={},_.each(n.replace(h,"").split(/\s*,\s*/),function(h){d[h]&&(s[h]=1)}),fixConfig(d,s)}}return null};var MINI=require("minified"),$=MINI.$,$$=MINI.$$,EE=MINI.EE,_=require("minifiedUtil")._,MAX_SIZE=4095,SRC="/download/minified-web-src.js",GROUPS="INTERNAL SELECTORS ELEMENT REQUEST JSON EVENTS COOKIE ANIMATION OPTIONS".split(" ");
function closureCompile(l,d,j){$.request("post","http://closure-compiler.appspot.com/compile",{js_code:l,output_format:"json",output_info:["compiled_code","statistics"],output_file_name:"minified-custom.js",compilation_level:d?"ADVANCED_OPTIMIZATIONS":"SIMPLE_OPTIMIZATIONS"}).then(function(d){j&&j($.parseJSON(d))},function(d,g,l){window.console&&console.log("error",d,g,l);j&&j(null)}).error(function(d){window.console&&console.log(d)})}
function setUpConfigurationUI(l){function d(){$(".modCheck").each(function(d){var g=0;$(".secCheck",d.parentNode.parentNode).each(function(d){d.checked&&g++});d.checked=0<g})}function j(d){var g=l.sectionMap[d.id.substr(4)];d.checked?_.eachObj(g.requires,function(d){$("#sec-"+d).set("checked",!0)}):_.eachObj(g.requiredBy,function(d){$("#sec-"+d).set("checked",!1)})}$("#compile").on("click",function(){var d={};$(".secCheck").each(function(g){g.checked&&(d[g.id.substr(4)]=1)});var g=compile(l.sections,
l.sectionMap,d),j=serializeEnabledSections(l.sections,d);if($$("#compressionAdvanced").checked)$$("#compile").disabled=!0,closureCompile(g,!0,function(d){$$("#compile").disabled=!1;$("#resultDiv").animate({$$slide:1});d?($("#gzipRow, #downloadRow").set({$display:"table-row"}),$$("#resultSrc").value=j+"\n"+d.compiledCode,$("#resultPlain").fill((d.statistics.compressedSize/1024).toFixed(2)+"kb ("+d.statistics.compressedSize+" bytes)"),$("#resultGzippedSize").fill((d.statistics.compressedGzipSize/1024).toFixed(2)+
"kb ("+d.statistics.compressedGzipSize+" bytes)"),$$("#resultLink").setAttribute("href","http://closure-compiler.appspot.com"+d.outputFilePath),$("#resultGzippedComment").set({$$fade:d.statistics.compressedGzipSize>MAX_SIZE?1:0})):alert("Google Closure Service not availble. Try again later.")});else try{$("#resultDiv").animate({$$slide:1}),$$("#resultSrc").value=j+g,$("#resultPlain").fill((g.length/1024).toFixed(2)+"kb"),$("#gzipRow, #downloadRow").set({$display:"none"})}catch(n){console.log(n)}return!1});
var p=$("#configSrcDiv").toggle({$$slide:0},{$$slide:1});$("#fromScratch").on("|click",p,[!1]);$("#loadConfig").on("|click",p,[!0]);$("#recreate").on("click",function(){try{var g=$$("#configSrc").value,j=deserializeEnabledSections(l.sections,l.sectionMap,g);j?(_.eachObj(l.sectionMap,function(d){var g=$$("#sec-"+d);g&&(g.checked=!!j[d])}),d()):alert("Can not find configuration in source.")}catch(q){console.log(q)}});$("#sectionCheckboxes").fill();for(var g=1;g<GROUPS.length;g++){var r;$("#sectionCheckboxes").add(r=
EE("div",{"@id":"divMod-"+g},EE("div",{className:"groupDescriptor"},[p=EE("input",{"@id":"mod-"+g,className:"modCheck","@type":"checkbox",checked:"checked"})(),EE("label",{"@for":"mod-"+g},GROUPS[g])]))());$(p).on("change",function(){var g=this.checked;$(".secCheck",this.parentNode.parentNode).each(function(d){d.checked=g;j(d)});d();return!0});var q;_.filter(l.sections,function(d){return d.group==GROUPS[g]&&d.configurable}).sort(function(d,g){var j=d.name||d.id,l=g.name||g.id;return j==l?0:j>l?1:
-1}).each(function(g){function k(d,g){var h=_.filter(_.keys(g),function(d){return!!g[d].name});if(!h.length)return null;var j=0,k=d;_.each(h,function(d){j++<Math.min(h.length,8)&&(1<j&&(k=j==Math.min(h.length,8)?k+" and ":k+", "),k=8==j&&8<h.length?k+"more":k+(l.sectionMap[d].name||l.sectionMap[d].id))});return k+="."}var p=k("Required by ",g.requiredBy),n=k("Requires ",g.requires);r.add(EE("div",{className:"sectionDescriptor"},[q=EE("input",{className:"secCheck","@type":"checkbox","@id":"sec-"+g.id,
checked:"default"==g.configurable?"checked":null})(),EE("label",{"@for":"sec-"+g.id},g.name||g.id),EE("div",{className:"requirements"},[p?[p,EE("br")]:null,n])]));$(q).on("change",function(){j(this);d();return!0})})}}
$(function(){var l=/MSIE\s([\d.]+)/i.exec(navigator.userAgent);l&&10>parseInt(l[1])?$("#builderDiv").fill("Sorry, the Builder tool requires at least Internet Explorer 10 (or, alternatively, Chrome or Firefox). Earlier versions lack CORS support required to use Google Closure's web service."):$.request("get",SRC,null).then(function(d){setUpConfigurationUI(prepareSections(d))}).error(function(d){window.console&&console.log(d)})});
